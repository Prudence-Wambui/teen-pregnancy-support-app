"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["3734"],{44430:function(e,t,n){n.d(t,{Z:()=>r});let r={divider:"divider-Ti4OTa",vertical:"vertical-jkeHTs"}},27836:function(e,t,n){n.d(t,{b:()=>l,j:()=>s});var r=n(16584),i=n(95441),o=n(80026),a=n(60308);function s(e){let{publisherTerms:t,utm_source:n}=e,{iString:s}=(0,i.M1)();return(0,r.BX)(r.HY,{children:[s("By registering you agree to")," ",t&&(0,r.BX)(r.HY,{children:[t,", "]}),(0,r.BX)(o.xv,{as:"span",translated:!0,children:["Substack's ",(0,r.tZ)(l,{href:(0,a._QN)({utm_source:n}),children:"Terms of Service"})]}),(0,r.BX)(o.xv,{as:"span",translated:!0,children:[", our ",(0,r.tZ)(l,{href:(0,a.Zzu)({utm_source:n}),children:"Privacy Policy"})]}),(0,r.BX)(o.xv,{as:"span",translated:!0,children:[", and our ",(0,r.tZ)(l,{href:(0,a.WFt)({utm_source:n}),children:"Information Collection Notice"})]}),"."]})}function l(e){let{href:t,children:n}=e;return(0,r.tZ)("a",{className:(0,o.oB)({decoration:"underline"}),href:t,target:"_blank",rel:"noopener",children:n})}},57391:function(e,t,n){n.d(t,{Vt:()=>y,f9:()=>k,gn:()=>v,jc:()=>b,kx:()=>x,ng:()=>_});var r,i=n(7409),o=n(99282),a=n(16584),s=n(6400),l=n(98661),u=n(30396),c=n(78718),d=n.n(c),p=n(35702),f=n(48980),h=n(8589);let m={variantOverrides:{},experimentFeatures:{},experimentExposures:{}};function v(){return"undefined"!=typeof window&&(0,i._)({variantOverrides:{},experimentFeatures:{},experimentExposures:{}},d()(window._preloads,["variantOverrides","experimentFeatures","experimentExposures","pubIdOverride"]))||m}let w=v(),g="undefined"!=typeof window?null===(r=window._preloads)||void 0===r?void 0:r.siteConfigs:{},_=(e,t)=>{let n=t=>{if(!t||!e)return null;let n=e[t];return void 0===n?null:n},r=e=>{if(!e)return null;let r=n(e);if((0,h.Dh)(r))return{intendedVariant:r,shouldLog:!1};if(t.variantOverrides&&e in t.variantOverrides)return{intendedVariant:t.variantOverrides[e],shouldLog:!1};let i=t.experimentExposures||{};if(i[e])return{intendedVariant:i[e],shouldLog:!1};let o=t.experimentFeatures||{};return o[e]?{intendedVariant:o[e],shouldLog:!0}:null},i=async(e,t,n)=>{if("undefined"!=typeof window){window._preloads.experimentExposures=window._preloads.experimentExposures||{};let r=window._preloads.experimentExposures;r[e]=t;try{await (0,f.rd)("/api/v1/experiment_exposure",{json:{experiment_name:e,variant_name:t,ignore_downsampling:!!n},method:"post"})}catch(t){delete r[e]}}};return{getExperimentVariant:e=>{let t=r(e);return t?t.intendedVariant:null},exposeExperiment:async function(e){let{ignoreDownsampling:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{intendedVariant:n,shouldLog:o}=r(e)||{};return!!o&&(await i(e,n,!!t),!0)},getExposedVariant:e=>{if(!e)return null;let r=n(e);if((0,h.Dh)(r))return r;if(t.variantOverrides&&e in t.variantOverrides)return t.variantOverrides[e];let i=t.experimentExposures||{};return i[e]?i[e]:null},refreshExperimentVariants:async function(){let e,{ignoreDownsampling:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&(e=new URLSearchParams({ignore_downsampling:"true"}));let n=await (0,f.rd)("/api/v1/experiment_features",{method:"get",query:e});(null==n?void 0:n.features)&&(0,p.a)({experimentFeatures:n.features})}}},x=(0,s.createContext)(_(g,w));function y(e){let{siteConfigs:t={},experimentInfo:n,children:r}=e,i=n||w,o=(0,u.Ye)(()=>_(t,i),[t,...Object.values(i)]);return(0,a.tZ)(x.Provider,{value:o,children:r})}function b(){return(0,u.qp)(x)}x.displayName="ExperimentsContext";let k=e=>{let t=(0,l.forwardRef)((t,n)=>{let r=b();return(0,a.tZ)(e,(0,o._)((0,i._)({},r,t),{ref:n}))});return t.displayName="withExperimentsContext(".concat(e.displayName||e.name||"Anonymous",")"),t}},37168:function(e,t,n){n.d(t,{WH:()=>v,ZN:()=>w,hO:()=>g});var r,i,o=n(7409),a=n(99282),s=n(16584),l=n(6400),u=n(98661),c=n(30396),d=n(57391),p=n(40647);let f=(0,d.gn)(),h="undefined"!=typeof window&&null!==(i=null===(r=window._preloads)||void 0===r?void 0:r.siteConfigs)&&void 0!==i?i:{},m=(e,t)=>(0,o._)({},(0,d.ng)(e,t),(0,p.Xz)(e)),v=(0,l.createContext)(m(h,f));function w(e){let{siteConfigs:t={},experimentInfo:n,children:r}=e,i=n||f,o=(0,c.Ye)(()=>m(t,i),[t,i]);return(0,s.tZ)(v.Provider,{value:o,children:r})}v.displayName="ExperimentsAndSiteConfigContext";let g=e=>{let t=(0,u.forwardRef)((t,n)=>{let r=(0,c.qp)(v);return(0,s.tZ)(e,(0,a._)((0,o._)({},r,t),{ref:n}))});return t.displayName="withExperimentsAndSiteConfigContext(".concat(e.displayName||e.name||"Anonymous",")"),t}},56629:function(e,t,n){n.d(t,{Iz:()=>v,So:()=>w,us:()=>m,vz:()=>h});var r,i,o=n(7409),a=n(99282),s=n(16584),l=n(6400),u=n(98661),c=n(30396),d=n(48980);let p="undefined"!=typeof window&&null!==(i=null===(r=window._preloads)||void 0===r?void 0:r.publicationSettings)&&void 0!==i?i:{};function f(e){return t=>{if(!t||!e)return null;let n=e[t];return void 0===n?null:n}}let h=(0,l.createContext)({getSettingFor:f(p),changeSetting:()=>Promise.resolve(void 0),preloadedPubSettings:p});h.displayName="PublicationSettingsContext";let m=e=>{let t=(0,u.forwardRef)((t,n)=>{let r=w();return(0,s.tZ)(e,(0,a._)((0,o._)({},r,t),{ref:n}))});return t.displayName="withPubSettingsContext(".concat(e.displayName||e.name||"Anonymous",")"),t};function v(e){let{settings:t={},children:n}=e,[r,i]=(0,c.eJ)(t),a=async e=>{i((0,o._)({},r,e));try{await (0,d.rd)("/api/v1/publication_settings",{method:"PUT",json:e})}catch(e){console.error(e)}},l=(0,c.Ye)(()=>({getSettingFor:f(r),changeSetting:a,preloadedPubSettings:r}),[r]);return(0,s.tZ)(h.Provider,{value:l,children:n})}function w(){return(0,c.qp)(h)}},60807:function(e,t,n){n.d(t,{Fl:()=>w,SE:()=>g,St:()=>h,aF:()=>v,dr:()=>m});var r,i,o,a,s=n(7409),l=n(99282),u=n(16584),c=n(98661),d=n(48980);let p="undefined"!=typeof window&&null!==(o=null===(r=window._preloads)||void 0===r?void 0:r.user)&&void 0!==o?o:null,f="undefined"!=typeof window&&null!==(a=null===(i=window._preloads)||void 0===i?void 0:i.userSettings)&&void 0!==a?a:{},h=(0,c.createContext)({user:p,setUser:()=>void 0,userSettings:f,changeSetting:()=>void 0});function m(e){let{defaultValue:t,userSettings:n,children:r}=e,[i,o]=(0,c.useState)(t||p),[a,m]=(0,c.useState)(null!=n?n:f),v=async(e,t,n,r)=>{if(!i&&!(null==r?void 0:r.token))return;let o=a[e];m((0,l._)((0,s._)({},a),{[e]:t}));try{await (0,d.rd)("/api/v1/user-setting",{method:"PUT",json:{type:e,value_bool:"bool"!==n&&(n||"boolean"!=typeof t)?void 0:t,value_datetime:"datetime"!==n&&(n||"string"!=typeof t)?void 0:t,value_text:"text"===n?t:void 0,token:null==r?void 0:r.token}})}catch(t){if(t instanceof d.kp)alert(t.getMessage()),m(t=>(0,l._)((0,s._)({},t),{[e]:o}));else throw t}},w=(0,c.useMemo)(()=>({user:i,setUser:o,userSettings:a,changeSetting:v}),[i,a]);return(0,u.tZ)(h.Provider,{value:w,children:r})}function v(){return(0,c.useContext)(h).user}function w(){return(0,c.useContext)(h).userSettings}function g(){return(0,c.useContext)(h)}h.displayName="UserContext"},51776:function(e,t,n){n.d(t,{cv:()=>m,fv:()=>f,oi:()=>p,ts:()=>v});var r=n(7409),i=n(99282),o=n(98848),a=n(16584),s=n(94184),l=n.n(s),u=n(98661),c=n(19081);n(58175);var d=n(68686);let p=(0,u.forwardRef)((e,t)=>{var{className:n,type:s="text",error:u=!1,leading:p,trailing:f,flex:v="auto"}=e,w=(0,o._)(e,["className","type","error","leading","trailing","flex"]);return(0,a.BX)(c.hs,{position:"relative",flex:v,minWidth:0,children:[(0,a.tZ)("input",(0,i._)((0,r._)({},w),{type:s,className:l()(n,d.Z.input,d.Z.inputText,u&&d.Z.error,w.disabled&&d.Z.disabled,w.readOnly&&d.Z.readOnly,null!=p&&d.Z.leading,null!=f&&d.Z.trailing),onKeyDown:e=>{var t;e.stopPropagation(),null===(t=w.onKeyDown)||void 0===t||t.call(w,e)},ref:t})),p&&(0,a.tZ)(h,{children:p}),f&&(0,a.tZ)(m,{children:f})]})}),f=e=>{var{className:t,children:n}=e,s=(0,o._)(e,["className","children"]);return(0,a.tZ)(c.tu,(0,i._)((0,r._)({gap:8,className:t},s),{children:n}))},h=e=>{let{children:t,className:n}=e;return(0,a.tZ)(c.hs,{className:l()(d.Z.wrapper,d.Z.leading,n),children:t})},m=e=>{var{children:t,className:n}=e,s=(0,o._)(e,["children","className"]);return(0,a.tZ)(c.hs,(0,i._)((0,r._)({className:l()(d.Z.wrapper,d.Z.trailing,n)},s),{children:t}))};function v(e){let t=(0,u.useRef)(null);return{innerRef:t,combinedRef:n=>{t.current=n,"function"==typeof e?e(n):e&&(e.current=n)}}}},80058:function(e,t,n){n.d(t,{E:()=>s,X:()=>l});var r=n(58865),i=n(95441);function o(){let e=(0,r._)(["","'s avatar"]);return o=function(){return e},e}function a(){let e=(0,r._)(["View ","'s profile"]);return a=function(){return e},e}function s(e,t){let{iString:n,iTemplate:r}=(0,i.M1)();if(t)return t;let a=null!=e?e:n("User");return r(o(),a)}function l(e,t){let{iString:n,iTemplate:r}=(0,i.M1)();if(t)return t;let o=null!=e?e:n("User");return r(a(),o)}},64528:function(e,t,n){n.d(t,{N:()=>o});var r=n(16584),i=n(6400);let o=e=>{let{children:t,separator:n}=e,o=[],a=(0,i.toChildArray)(t);return a.forEach((e,t)=>{o.push(e),t!==a.length-1&&o.push(n)}),(0,r.tZ)(r.HY,{children:o})}},17043:function(e,t,n){n.d(t,{UH:()=>o,zF:()=>i,zJ:()=>a});var r=n(14773);function i(e,t){var n,i;let{quality:s="auto:good",format:l="auto",crop:u="limit",lossy:c=!1,attachment:d=!1,filename:p=null,gravity:f=null,height:h=null,aspect:m=null,backgroundColor:v,version:w=null,smartCrop:g=!1,portraitCrop:_=!1,skipDomainValidation:x=!1,leadingSegments:y=[],trailingSegments:b=[],blurSigma:k=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return e;e.startsWith("/")&&!e.startsWith("//")&&(e=(0,r.ZJ)()+e),e=o(e);try{if(new URL(e).hostname.endsWith(".localhost"))return e}catch(e){}if("undefined"!=typeof window&&(null===(i=window)||void 0===i?void 0:null===(n=i.location)||void 0===n?void 0:n.hostname)&&["subwit.com","herokuapp.com"].reduce((e,t)=>e||window.location.hostname.endsWith(t),!1)&&(e=e.replace("//substack.com","//".concat(window.location.hostname))),e.startsWith("https://substackcdn.com")||e.startsWith(r.L4))return e;if(e.startsWith("https://d3b3sm9t19x0yd.cloudfront.net"))return e.replace(/^https:\/\/d3b3sm9t19x0yd\.cloudfront\.net/,r.L4);if(e.startsWith("https://res.cloudinary.com"))return e.replace(/^https:\/\/res\.cloudinary\.com\/[^/]+/,r.L4);if(!x&&!e.match(/^https?:\/\/(bucketeer[^/]*\.s3\.amazonaws\.com|(.*\.)?substack\.com|substack\.info|substack-post-media\.s3\.amazonaws\.com|substack-post-media-staging\.s3\.amazonaws\.com|substack-video\.s3\.amazonaws\.com|substack-video-staging\.s3\.amazonaws\.com|substack-staging-pr-\d+\.herokuapp\.com|.*\.ngrok\.io|.*\.subwit\.com|www\.shatnerchatner\.com|cyberrisk\.news|proofofwork\.news|www\.trapital\.co|www\.truehoop\.com|www\.creditwritedowns\.com|sinocism\.com|nb\.sinocism\.com|popular\.info|robertcottrell\.com|pbs\.twimg\.com|www\.theupside\.us|www\.exponentialview\.co|storage\.opensea\.io).*/))return e;if(g&&t&&h){let n=a(e);if(n){let e=t/h,r=n.width/n.height;(e<1&&r>=1||e>=1&&r<1||1===e&&r>=1||1===e&&r<=1)&&Math.abs(e-r)>=.5&&(u="fill",f=null!=f?f:"auto")}}if(g&&(u="fill",f=null!=f?f:"auto"),m&&t&&null==h&&"string"==typeof m&&m.match(/^(\d+\.?\d*:\d+\.?\d*|\d+\.?\d*)$/)){if(m.includes(":")){let[e,n]=m.split(":").map(e=>parseFloat(e));h=Math.round(t*n/e)}else h=Math.round(t/Number(m))}let Z=e=>e.replace(/,/g,"%252C"),C=[t&&"w_".concat(t),h&&"h_".concat(h),u&&(t||h)&&"c_".concat(u),l&&"f_".concat(l),s&&"q_".concat(s),"fl_".concat(c?"lossy":"progressive:steep"),f&&"g_".concat(f),d&&"fl_attachment".concat(p?":".concat(Z(p)):""),v&&"b_rgb:".concat(v),k&&"e_blur:".concat(k)].filter(Boolean).join(","),S=[t&&"w_".concat(t),l&&"f_".concat(l),s&&"q_".concat(s),"fl_".concat(c?"lossy":"progressive:steep"),d&&"fl_attachment".concat(p?":".concat(Z(p)):""),v&&"b_rgb:".concat(v)].filter(Boolean).join(","),N=[u&&(t||h)&&"c_".concat(u),f&&"g_".concat(f),m?"ar_".concat(m):"ar_1"].filter(Boolean).join(","),E=_?[S,"/if_ar_lt_1.0/",N,"/if_end"].join(""):[C].filter(Boolean).join(",");return"".concat(r.L4,"/image/fetch/").concat(y.concat([E]).concat(b).join("/"),"/").concat(encodeURIComponent(e+(w?"".concat(-1!==e.indexOf("?")?"&":"?","version=").concat(w):"")))}function o(e){if(!e)return e;for(let t of[/^https:\/\/substackcdn\.com\/image\/fetch\/(?:\$[^/]+\/)?[^/]+\/(.+)$/i,/^https:\/\/substackcdn\.net\/image\/fetch\/(?:\$[^/]+\/)?[^/]+\/(.+)$/i,/^https:\/\/cdn\.substack\.com\/image\/fetch\/(?:\$[^/]+\/)?[^/]+\/(.+)$/i,/^https:\/\/cdn\.substack\.info\/image\/fetch\/(?:\$[^/]+\/)?[^/]+\/(.+)$/i,/^https:\/\/d3b3sm9t19x0yd\.cloudfront\.net\/image\/fetch\/(?:\$[^/]+\/)?[^/]+\/(.+)$/i,/^https:\/\/res\.cloudinary\.com\/hhsslviub\/image\/fetch\/(?:\$[^/]+\/)?[^/]+\/(.+)$/i]){let n=t.exec(e);if(n)return decodeURIComponent(n[1])}return e}function a(e){let t=e.match(/(\d+)x(\d+)(\.\w+)?$/);return t?{width:+t[1],height:+t[2]}:null}},35934:function(e,t,n){n.d(t,{gz:()=>i});var r=n(27412);class i extends Error{constructor(e,t={},n=!1,i=null){let o,a;super(e),(0,r._)(this,"status",void 0),(0,r._)(this,"userVisible",void 0),(0,r._)(this,"messageHtml",void 0),(0,r._)(this,"response",void 0),(0,r._)(this,"type",void 0),(0,r._)(this,"metadata",void 0),this.name=this.constructor.name;let s=null,l=null,u=null;if("object"==typeof t){var c,d,p,f,h,m;o=null!==(c=t.status)&&void 0!==c?c:500,n=null!==(d=t.userVisible)&&void 0!==d&&d,i=null!==(p=t.messageHtml)&&void 0!==p?p:null,s=null!==(f=t.responseBody)&&void 0!==f?f:null,l=null!==(h=t.type)&&void 0!==h?h:null,u=null!==(m=t.metadata)&&void 0!==m?m:null}else o=t;this.status=o,this.userVisible=!!s||n,this.messageHtml=i,this.type=l,this.metadata=u,s?a=s:this.userVisible?i?a={errors:[{msg:e,msgHTML:i}],type:"list"}:(a={error:e,type:"single"},this.type&&(a.type=this.type),this.metadata&&(a.metadata=this.metadata)):a={error:""},this.response={body:a},Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}}}]);