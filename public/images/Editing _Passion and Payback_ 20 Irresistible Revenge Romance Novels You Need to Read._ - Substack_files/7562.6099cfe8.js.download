"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["7562"],{45985:function(e,t,n){n.d(t,{Z:()=>i});let i={badge:"badge-YORDXJ",dotContainer:"dotContainer-WBRxHF",dot:"dot-uGm5KZ"}},42450:function(e,t,n){n.d(t,{Z:()=>i});let i={menu:"menu-WfPxpI",submenu:"submenu-tlfomG",floatingContainer:"floatingContainer-MUwyEF",menuItem:"menuItem-B7SAG_",disabled:"disabled-bXLaNs",priority_primary:"priority_primary-xntVG3",priorityPrimary:"priority_primary-xntVG3",priority_destructive:"priority_destructive-sXev9X",priorityDestructive:"priority_destructive-sXev9X",priority_secondary:"priority_secondary-prGxrw",prioritySecondary:"priority_secondary-prGxrw",relative:"relative-pHLTt2",icon:"icon-HSm3VM",text:"text-X3mTtF",transition:"transition-a_Ilul",show:"show-Kgvg96",hide:"hide-zZFh0h",actionSheetTransition:"actionSheetTransition-JBN9s_",actionSheetShow:"actionSheetShow-47rpBE",actionSheetHide:"actionSheetHide-QhOutK"}},44854:function(e,t,n){n.d(t,{Z:()=>i});let i={root:"root-MjHNqP",isOnInbox:"isOnInbox-pP0vQF",paywallStack:"paywallStack-RdkSad",pubChatColumn:"pubChatColumn-Zck7MX",pubChatFull:"pubChatFull-tEPJ4X",submit:"submit-T76OjY",inactive:"inactive-RF_jH9",chatPublicationContainer:"chatPublicationContainer-y1FRFU",invitesRow:"invitesRow-QZEeej",show:"show-vL_rsU",unfurl:"unfurl-n5q4dW",sticky:"sticky-ykmBOy",unreadDot:"unreadDot-fNgNDl",unreadTabDot:"unreadTabDot-aqz7wG",selected:"selected-oDAfJA",currentVisibilityBox:"currentVisibilityBox-VAGH9Q",headerPubLink:"headerPubLink-uygNA1",sidebarRowTitle:"sidebarRowTitle-wepYF4",headerPubAvatar:"headerPubAvatar-jFmd9c",inputBox:"inputBox-UuLYvf",modalContext:"modalContext-nC14Y0",textInputInset:"textInputInset-jnSii9",invisible:"invisible-AW4ANv",textInput:"textInput-zlmYim",dropzone:"dropzone-W750JH",submitButton:"submitButton-_zJ5fy",newThreadButton:"newThreadButton-POT_Ph",roundedFooterPlaceholder:"roundedFooterPlaceholder-k7TSWJ",chatContainer:"chatContainer-fnFgIy",fade:"fade-HKCqnN",composerLinkPreview:"composerLinkPreview-cBU00h",composer:"composer-rYAaNa",imageBox:"imageBox-NAFgde",image:"image-PfNhry",deleteFile:"deleteFile-gv_fWj",modalColumn:"modalColumn-fVvKpE",visibilityDropdown:"visibilityDropdown-mnqCEz",visibilityDropdownText:"visibilityDropdownText-uW5qxU",messageSquareIcon:"messageSquareIcon-_NUoeX",paywall:"paywall-hfm67h",modalChatEditor:"modalChatEditor-bbcasD",newText:"newText-IkD33N",newBorder:"newBorder-fycRk_",jumpButton:"jumpButton-yc047J",jumpBadge:"jumpBadge-IO2hJP"}},21694:function(e,t,n){n.d(t,{Z:()=>i});let i={root:"root-LeqPP3",badge:"badge-WYVub3",circle:"circle-_ZTVoA"}},30218:function(e,t,n){n.d(t,{Z:()=>c});var i=n(16584),r=n(30396),o=n(20253),l=n(15771),a=n(19081),s=n(58175),d=n(51776),u=n(26111);let c=e=>{let{allowAllDay:t,redirect:n,onCancel:c,requiresMfa:h}=e,[m,p]=(0,r.eJ)(!1),[v,f]=(0,r.eJ)(""),[_,b]=(0,r.eJ)(!h),g=(0,r.sO)(null),y=n||(0,u.x)("redirect")||"/",Z=(0,u.x)("for_pub")||"";return(0,r.d4)(()=>{g.current&&g.current.focus()},[]),(0,r.d4)(()=>{6===v.length&&b(!0)},[v]),(0,i.tZ)(o.ZP,{className:"customer-support-mode-form",analyticsName:"Customer Support Mode Form",action:"/api/v1/customer_support_mode",onSuccess:e=>{var t;let n=null==e?void 0:null===(t=e.body)||void 0===t?void 0:t.redirect;n?document.location.href=n:document.location.href=y||"/"},autoLock:!0,children:(0,i.BX)(a.tu,{children:[(0,i.BX)(a.tu,{gap:8,children:[(0,i.tZ)(s.xv.Meta,{className:"danger",weight:"semibold",color:"error",children:"Danger"}),(0,i.tZ)(s.xv.H2,{children:"Support Mode"}),(0,i.tZ)(s.xv.B3,{children:"Be absolutely respectful to the writers on whose behalf you are working."}),h&&(0,i.BX)(i.HY,{children:[(0,i.tZ)(s.xv.B3,{paddingTop:12,weight:"bold",children:"Enter your MFA code"}),(0,i.tZ)(d.oi,{ref:g,name:"code",inputMode:"numeric",maxLength:6,placeholder:"Code",value:v,width:300,autoComplete:"off",onChange:e=>f(e.target.value)})]}),t&&(0,i.tZ)("label",{children:(0,i.BX)(a.gq,{gap:8,children:[(0,i.tZ)("input",{type:"checkbox",defaultChecked:!1,onInput:e=>p(e.target.checked)})," ",(0,i.tZ)(s.xv.B3,{children:"Allow access for the day"})]})}),m&&(0,i.tZ)("input",{type:"hidden",name:"all_pubs",value:"true"}),(0,i.tZ)("input",{type:"hidden",name:"minutes",value:m?600:30}),(0,i.tZ)("input",{type:"hidden",name:"for_pub",value:Z}),(0,i.tZ)("input",{type:"hidden",name:"redirect",value:y}),(0,i.BX)(a.gq,{gap:8,paddingTop:8,children:[(0,i.tZ)(l.zx,{priority:"destructive",type:"submit",id:"enter-support-mode",disabled:!_,children:"Enter support mode"}),c&&(0,i.tZ)(l.zx,{priority:"secondary",onClick:c,children:"Cancel"})]})]}),(0,i.tZ)("div",{id:"error-container"})]})})}},78327:function(e,t,n){n.d(t,{V:()=>d});var i=n(16584),r=n(94184),o=n.n(r),l=n(19081),a=n(58175),s=n(45985);function d(e){let{className:t,count:n}=e;return(0,i.tZ)(l.hs,{alignItems:"center",justifyContent:"center",radius:"md",className:o()(s.Z.badge,!n&&s.Z.dot,t),children:(0,i.tZ)(a.xv.Digit,{color:"white",children:n?n<100?n:"99+":"0"})})}},83320:function(e,t,n){n.d(t,{Z:()=>s});var i=n(7409),r=n(99282),o=n(98848),l=n(16584),a=n(64515);let s=e=>{var{size:t=32,stroke:n="var(--color-fg-primary)",strokeWidth:s=2}=e,d=(0,o._)(e,["size","stroke","strokeWidth"]);return(0,l.tZ)(a.l,(0,r._)((0,i._)({},d),{name:"LucideTabActivity",svgParams:{viewBox:"0 0 32 32"},width:t,height:t,stroke:n,strokeWidth:s,strokeLinecap:"round",strokeLinejoin:"round",children:(0,l.tZ)("path",{d:"M14.2991 25C15.5582 25.6295 17.0401 25.6295 18.2992 25M13.9242 6.35035C13.1325 6.59102 11.3117 7.50553 10.3617 9.2383C9.17415 11.4043 9.5167 14.4866 9.17415 15.7362C8.83161 16.9858 7.98666 17.9021 7.39291 19.3461C7.25212 19.6885 7.14472 19.9903 7.06278 20.2611C6.74292 21.3183 7.69459 22.2341 8.79916 22.2341H23.7992C24.9037 22.2341 25.8554 21.3183 25.5355 20.2611C25.4536 19.9903 25.3462 19.6885 25.2054 19.3461C24.6117 17.9021 23.7667 16.9858 23.4242 15.7362C23.0816 14.4866 23.4242 11.4043 22.2367 9.2383C21.2867 7.50553 19.4658 6.59102 18.6742 6.35035C17.1253 5.88322 15.473 5.88322 13.9242 6.35035Z"})}))}},87698:function(e,t,n){n.d(t,{Z:()=>s});var i=n(7409),r=n(99282),o=n(98848),l=n(16584),a=n(64515);let s=e=>{var{size:t=32,stroke:n="var(--color-fg-primary)",strokeWidth:s=2}=e,d=(0,o._)(e,["size","stroke","strokeWidth"]);return(0,l.tZ)(a.l,(0,r._)((0,i._)({},d),{name:"LucideTabChat",svgParams:{viewBox:"0 0 32 32"},width:t,height:t,stroke:n,strokeWidth:s,strokeLinecap:"round",strokeLinejoin:"round",children:(0,l.tZ)("path",{d:"M8.5 25.5C9.5 24.5 9.83333 22.3333 9.5 21.5C9.42273 21.4734 8.84545 21.2538 8.76817 21.2262C7.66999 20.8332 7 19.7542 7 18.5879V9.87424C7 8.72745 7.64925 7.6677 8.73365 7.2946C12.2079 6.09927 18.2029 5.11688 24.2305 7.27337C25.3287 7.66627 26 8.74577 26 9.91214V18.6258C26 19.7726 25.3496 20.8328 24.2652 21.2058C21.9099 22.016 18.3965 22.7282 14.5 22.4312C13.5 24.4312 11 25.5 8.5 25.5Z"})}))}},89320:function(e,t,n){n.d(t,{Z:()=>s});var i=n(7409),r=n(99282),o=n(98848),l=n(16584),a=n(64515);let s=e=>{var{size:t=32,stroke:n="var(--color-fg-primary)",strokeWidth:s=2}=e,d=(0,o._)(e,["size","stroke","strokeWidth"]);return(0,l.tZ)(a.l,(0,r._)((0,i._)({},d),{name:"LucideTabHome",svgParams:{viewBox:"0 0 32 32"},width:t,height:t,stroke:n,strokeWidth:s,strokeLinecap:"round",strokeLinejoin:"round",children:(0,l.tZ)("path",{d:"M14 22.6728C15.259 23.3023 16.741 23.3023 18 22.6728M6 15.3089V23.6727C6 25.3296 7.34315 26.6727 9 26.6727H23C24.6569 26.6727 26 25.3296 26 23.6727V15.3089C26 14.7312 25.7503 14.1818 25.315 13.802L16.6575 6.24657C16.2808 5.91781 15.7192 5.91781 15.3425 6.24657L6.68496 13.802C6.24974 14.1818 6 14.7312 6 15.3089Z"})}))}},9997:function(e,t,n){n.d(t,{Z:()=>s});var i=n(7409),r=n(99282),o=n(98848),l=n(16584),a=n(64515);let s=e=>{var{size:t=34,stroke:n="var(--color-fg-primary)",strokeWidth:s=2}=e,d=(0,o._)(e,["size","stroke","strokeWidth"]);return(0,l.BX)(a.l,(0,r._)((0,i._)({},d),{name:"LucideTabInbox",svgParams:{viewBox:"0 0 34 34"},width:t,height:t,stroke:n,strokeWidth:s,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.tZ)("path",{d:"M15,8C15,6.895 14.105,6 13,6H9C7.895,6 7,6.895 7,8V12C7,13.105 7.895,14 9,14H13C14.105,14 15,13.105 15,12V8Z"}),(0,l.tZ)("path",{d:"M15,20C15,18.895 14.105,18 13,18H9C7.895,18 7,18.895 7,20V24C7,25.105 7.895,26 9,26H13C14.105,26 15,25.105 15,24V20Z"}),(0,l.tZ)("path",{d:"M27,20C27,18.895 26.105,18 25,18H21C19.895,18 19,18.895 19,20V24C19,25.105 19.895,26 21,26H25C26.105,26 27,25.105 27,24V20Z"}),(0,l.tZ)("path",{d:"M27,8C27,6.895 26.105,6 25,6H21C19.895,6 19,6.895 19,8V12C19,13.105 19.895,14 21,14H25C26.105,14 27,13.105 27,12V8Z"})]}))}},66328:function(e,t,n){n.d(t,{v:()=>e1});var i=n(7409),r=n(16584),o=n(30396),l=n(94184),a=n.n(l),s=n(14293),d=n.n(s),u=n(28161),c=n(99282),h=n(24840),m=n(80569),p=n.n(m),v=n(30218),f=n(93666),_=n(31131),b=n(99869),g=n(67358),y=n(12561),Z=n(59154),C=n(79138),w=n(37632),k=n(4473),x=n(39535),N=n(75697),B=n(16354),S=n(95441),I=n(68833),M=n(15771),A=n(44424),P=n(63651),E=n(47929);function T(e){let{pub:t,user:n}=e,{iString:i}=(0,S.M1)(),[l,a]=(0,o.eJ)(!1),s=(0,P.SVA)(t),d={utm_source:E.b3.navbar,utm_medium:E.lP.web,r:(null==n?void 0:n.id)?n.id.toString(36):null},u=(0,P.n1t)(s,d),c=async()=>{(0,I.j)(I.FP.PUBLICATION_SHARE_BUTTON_CLICKED)},h=(0,r.tZ)(M.hU,{"aria-label":i("Share Publication"),priority:"tertiary",children:(0,r.tZ)(_.Z,{size:20})});return(0,r.BX)(r.HY,{children:[(0,r.BX)(A.v2,{trigger:h,onOpen:c,layerOptions:{placement:"bottom-end",preferX:"left"},className:"dropdownMenu-zWNckK",maxHeight:"fit-content",children:[(0,r.tZ)(A.sN,{leading:(0,r.tZ)(b.Z,{}),onClick:()=>{(0,N.Ui)({shareUrl:u,pub:t,utm_campaign:E.VX.navbar})},children:i("Copy link")}),(0,r.tZ)(A.sN,{leading:(0,r.tZ)(g.Z,{}),onClick:()=>{(0,N.WZ)({shareUrl:u,shareName:"Subscribe to ".concat(t.name),pub:t,utm_campaign:E.VX.navbar})},children:i("Send as email")}),(0,r.tZ)(A.sN,{leading:(0,r.tZ)(y.Z,{}),onClick:()=>{(0,I.j)(I.FP.SHARE_PUBLICATION_MODAL_OPENED),a(!0)},children:i("Get shareable images")}),(0,r.BX)(A.xw,{children:[(0,r.tZ)(A.sN,{leading:(0,r.tZ)(k.Z,{}),onClick:()=>{(0,N.BZ)({shareUrl:u,pub:t,utm_campaign:E.VX.navbar})},children:i("Share to Notes")}),(0,r.tZ)(A.sN,{leading:(0,r.tZ)(C.Z,{}),onClick:()=>{(0,N.Po)({shareUrl:u,pub:t,utm_campaign:E.VX.navbar})},children:i("Share to Facebook")}),(0,r.tZ)(A.sN,{leading:(0,r.tZ)(w.Z,{}),onClick:()=>{(0,N.lc)({shareUrl:u,pub:t,utm_campaign:E.VX.navbar})},children:i("Share to Linkedin")}),(0,r.tZ)(A.sN,{leading:(0,r.tZ)(Z.Z,{}),onClick:()=>{(0,N.bI)({shareUrl:u,shareName:t.name,pub:t,utm_campaign:E.VX.navbar})},children:i("Share to Bluesky")}),(0,r.tZ)(A.sN,{leading:(0,r.tZ)(x.Z,{}),onClick:()=>{(0,N.Wn)({shareUrl:u,shareName:t.name,pub:t,utm_campaign:E.VX.navbar})},children:i("Share to X")})]})]}),(0,r.tZ)(B.iL,{pub:t,isOpen:l,setOpen:a,item:{type:"pub_shareable_image"},width:718})]})}var L=n(96726),F=n(33804),O=n(347),X=n(12757),z=n(57391),R=n(36848),D=n(39648),U=n(56629),j=n(40647),H=n(65205),V=n(60807),W=n(98914),J=n(98422),q=n(80026),K=n(19081),G=n(10510),Y=n(78096),Q=n(70379),$=n(87077),ee=n(7617),et=n(4615);function en(e){let{children:t}=e;return(0,r.tZ)(et.f6,{theme:"substack-theme",children:t})}var ei=n(97842),er=n(74312),eo=n(68494),el=n(36518),ea=n(7882),es=n(83010),ed=n(19425),eu=n(20160),ec=n(98012);let eh={alert:"alert-pEnrFa",transition:"transition-FsyEAS",enterFrom:"enterFrom-dljIVN",enterTo:"enterTo-HLLVxF",leaveFrom:"leaveFrom-aHkaAL",leaveTo:"leaveTo-k1oI5e"},em=e=>{(0,I.j)(I.FP.NOTIFICATIONS_ALERT_SHOWN,["comment_audience","comment_id","community_comment_id","created_at","id","mention_id","publication_id","sender_count","target_comment_id","target_community_comment_id","target_community_post_id","target_post_id","target_user_id","type"].reduce((t,n)=>(t[n]=null==e?void 0:e[n],t),{}))};function ep(){var e;let{activityUnreadCount:t}=(0,el.lR)(),{exposeExperiment:i,getExperimentVariant:l}=(0,z.jc)(),{isLoading:a,result:s,refetch:d}=(0,ea.ib)({pathname:"/api/v1/activity-feed-web",query:{limit:1},auto:!1});(0,o.d4)(()=>{t>0&&d()},[t]);let[u,c]=(0,o.eJ)(!1),[h,m]=(0,o.eJ)(!1),{isLoading:p,fetch:v,result:f}=(0,er.Oe)({module:"./MiniNotificationsViewer",onRequest:()=>Promise.all([n.e("3751"),n.e("2280"),n.e("5394"),n.e("7833"),n.e("3139")]).then(n.bind(n,79075)),fetchImmediately:!1}),_=(0,ec.Z)(),{userSettings:b,changeSetting:g}=(0,V.SE)(),y=null==s?void 0:null===(e=s.activityItems)||void 0===e?void 0:e[0],Z=(null==y?void 0:y.created_at)?(0,ec.Z)(null==y?void 0:y.created_at):_.subtract(100,"year"),C=(null==b?void 0:b.last_notification_alert_shown_at)?(0,ec.Z)(b.last_notification_alert_shown_at):_.subtract(100,"year"),w=7>_.diff(Z,"day")&&Z.diff(C,"hour")>2,k=(0,o.sO)(null),x=()=>{k.current&&window.clearTimeout(k.current)},N=()=>{x(),k.current=window.setTimeout(()=>{c(!1)},6e3)};return(0,o.d4)(()=>{w&&t>0&&(i("notification_alert_improved"),"treatment"!==l("notification_alert_improved")||(f&&!u?window.setTimeout(()=>{c(!0),g("last_notification_alert_shown_at",(0,ec.Z)().toISOString()),em(y),N()},2e3):f||p||v()))},[a,s,t,p,w,u,c]),(0,r.tZ)(r.HY,{children:(u||h)&&s&&(0,r.tZ)(ed.u,{style:{position:"fixed",left:"auto",right:20,top:92,zIndex:100},appear:!0,show:u,beforeEnter:()=>m(!0),afterLeave:()=>m(!1),enter:eh.transition,enterFrom:eh.enterFrom,enterTo:eh.enterTo,leave:eh.transition,leaveFrom:eh.leaveFrom,leaveTo:eh.leaveTo,children:(0,r.tZ)(eu.W,{children:(0,r.tZ)(K.hs,{radius:"md",border:"detail",className:eh.alert,onMouseEnter:x,onMouseLeave:N,shadow:"lg",bg:"primary",children:(0,r.tZ)(er.cr,{module:"@/frontend/reader2/activity/MiniNotificationsViewer",resolve:e=>e.MiniNotificationsStack,onRequest:()=>Promise.all([n.e("3751"),n.e("2280"),n.e("5394"),n.e("7833"),n.e("3139")]).then(n.bind(n,79075)),result:s,isReadOnly:!0})})})})})}var ev=n(21694);function ef(e){let{canShowAlerts:t=!1}=e,l=(0,el.lR)(),a=(0,ea.ib)({pathname:"/api/v1/activity-feed-web",query:{limit:12},auto:!1});(0,o.d4)(()=>{l.activityUnreadCount>0&&(0,I.j)(I.FP.NOTIFICATIONS_UNREAD_SHOWN,{unreadCount:l.activityUnreadCount})},[l.activityUnreadCount]);let s=()=>Promise.all([n.e("3751"),n.e("2280"),n.e("5394"),n.e("7833"),n.e("3139")]).then(n.bind(n,79075)),{iString:d}=(0,S.M1)();return(0,r.BX)(es.H,{trackingProps:{surface:"dropdown"},children:[(0,r.tZ)(A.v2,{trigger:e=>(0,r.tZ)($.u,{text:d("Activity"),layerOptions:{placement:"bottom-center",triggerOffset:4},children:(0,r.BX)(M.hU,(0,c._)((0,i._)({},e),{"aria-label":"View activity",priority:"tertiary",onMouseEnter:s,position:"relative",children:[(0,r.tZ)(eo.Z,{"aria-hidden":!0,size:20}),l.activityUnreadCount>0&&(0,r.tZ)(e_,{count:l.activityUnreadCount})]}))}),onOpen:()=>a.refetch(),maxHeight:"fit-content",padding:0,Theme:en,children:(0,r.tZ)(er.cr,{module:"@/frontend/reader2/activity/MiniNotificationsViewer",resolve:e=>e.MiniNotificationsViewer,onRequest:s,resource:a,bellCount:l.activityUnreadCount,whileLoading:(0,r.tZ)(K.hs,{width:400})})}),t&&(0,r.tZ)(ep,{})]})}function e_(e){let{count:t}=e;return(0,r.tZ)(K.hs,{className:a()(ev.Z.badge,t<10&&ev.Z.circle),alignItems:"center",justifyContent:"center",children:t<100?t:"99+"})}function eb(){var e,t;let{iString:n}=(0,S.M1)(),l=null!==(t=null===(e=(0,ei.WG)({},{focusThrottleInterval:3e5}).data)||void 0===e?void 0:e.unreadCount)&&void 0!==t?t:0;return(0,o.d4)(()=>{(0,I.j)(I.FP.CHAT_DROPDOWN_BADGE_SHOWN,{count:l})},[l]),(0,r.tZ)(A.v2,{trigger:e=>(0,r.tZ)($.u,{text:n("Chat"),layerOptions:{placement:"bottom-center",triggerOffset:4},children:(0,r.BX)(q.hU,(0,c._)((0,i._)({},e),{"aria-label":"View chats",priority:"tertiary",onMouseEnter:eg,position:"relative",children:[(0,r.tZ)(ee.Z,{size:20}),l>0&&(0,r.tZ)(e_,{count:l})]}))}),onClose:()=>{(0,I.j)(I.FP.CHAT_DROPDOWN_CLOSED)},maxHeight:"fit-content",padding:0,Theme:en,children:(0,r.tZ)(er.cr,{module:"./MiniInbox",onRequest:eg,resolve:e=>e.MiniChatInbox,whileLoading:(0,r.tZ)(q.xu,{width:360})})})}let eg=()=>Promise.all([n.e("9539"),n.e("3792"),n.e("6651"),n.e("8117"),n.e("5410"),n.e("3751"),n.e("5431"),n.e("9027"),n.e("6454"),n.e("3686"),n.e("7944"),n.e("7517"),n.e("2757"),n.e("7283"),n.e("2280"),n.e("1621"),n.e("9517"),n.e("1184"),n.e("7566"),n.e("5042"),n.e("3290"),n.e("8074"),n.e("5394"),n.e("774"),n.e("7833"),n.e("5477"),n.e("3119"),n.e("8693")]).then(n.bind(n,7392));var ey=n(24791),eZ=n(6070),eC=n(67914),ew=n(60308),ek=n(26111),ex=n(84864);let eN=e=>{let{pub:t,dashboardPubs:n}=e,{isMobile:i}=(0,J.v9)(),{iString:o}=(0,S.M1)();return(0,r.tZ)(Y.gd,{priority:"secondary",size:i?"sm":"md",menuItems:n.map(e=>{let{logo_url:n,name:i,subdomain:o}=e;return(0,r.tZ)(A.sN,{href:(0,ew.c0Q)(o,{params:{utm_source:E.b3.substack,utm_content:E.fZ.dashboardPubSwitcher}}),leading:(0,r.tZ)(G.wk,{size:24,radius:"xs",logoUrl:n}),priority:t.subdomain===o?"selected":"primary",children:i})}),href:(0,P.QK7)(t,{addBase:!0}),localNavigation:!1,"data-testid":"menu-dashboard-button",children:o("Dashboard")})},eB=e=>{let{onClick:t}=e,{iString:n}=(0,S.M1)();return(0,r.tZ)($.u,{text:n("Search"),layerOptions:{placement:"bottom-center",triggerOffset:4},children:(0,r.tZ)(q.hU,{priority:"tertiary",onClick:t,children:(0,r.tZ)(h.Z,{size:20})})})},eS=e=>{let{dashboardPubs:t,pub:n}=e,{iString:i}=(0,S.M1)(),{isMobile:o}=(0,J.v9)();return t.length>1?(0,r.tZ)(eN,{pub:n,dashboardPubs:t}):(0,r.tZ)(q.zx,{size:o?"sm":"md",priority:"secondary",href:(0,P.QK7)(n,{addBase:!0}),"data-testid":"menu-dashboard-button",localNavigation:!1,children:i("Dashboard")})},eI=e=>{var t;let{className:n,fixedTooltip:l=!0,freeSignup:s,freeSignupEmail:u,hideCta:h,hideNotifications:m,hideChat:_,hideSearch:b,hideShare:g,hideUserIndicator:y,hide_subscribe_cta:Z,isAccountContext:C=!1,isMeetingsActive:w,hasViralGiftsCount:k,isPublishContext:x,pub:N,showCustomerSupportModeModal:B,user:M}=e,{iString:A,language:G}=(0,S.M1)(),{isMobile:Y}=(0,J.v9)(),$=(0,o.sO)(null),{getSettingFor:ee}=(0,U.So)(),et=(0,z.jc)(),[en,ei]=(0,o.eJ)(!1),[er,eo]=(0,o.eJ)(!1),el=(0,Q.pm)(),{canTurnOnCustomerSupportMode:ea,isInCustomerSupportMode:es}={canTurnOnCustomerSupportMode:!!(null==(t=(0,V.aF)())?void 0:t.is_global_admin)&&!(null==t?void 0:t.is_admin),isInCustomerSupportMode:!!(null==t?void 0:t.is_global_admin)&&!!(null==t?void 0:t.is_admin)&&!(null==t?void 0:t.is_author)},ed=(0,o.I4)(async()=>{try{await p().del("/api/v1/customer_support_mode"),document.location.href="/"}catch(e){alert((0,W.zx)(e))}},[]),eu=async()=>{ei(!0);try{await p().post("/api/v1/subscription/reactivate").send({}),eo(!0),el.popToast(e=>(0,r.tZ)(Q.FN,(0,c._)((0,i._)({},e),{text:A("Your subscription has been renewed!")})))}catch(e){console.error("Failed to set to renew:",e),alert((0,W.zx)(e))}finally{ei(!1)}},eh=(0,o.I4)(async()=>{if(N.custom_domain){let e=window.location.pathname;(0,W.uX)((0,ew.Q6L)(e,N),{local_navigation:!1})}else{var e;null===(e=$.current)||void 0===e||e.open()}},[$,N]),em=x||C?F.w:O.h,ep=(0,D.O4)();return(0,r.BX)(K.gq,{alignItems:"center",gap:Y?4:8,className:a()("navbar-buttons",n),justifyContent:"end",children:[(0,r.tZ)(em,{children:(0,r.tZ)(j.QA.Consumer,{children:e=>(0,r.tZ)(R.RD.Consumer,{children:t=>(0,r.BX)(r.HY,{children:[!Y&&!M&&(0,r.BX)(K.gq,{gap:4,children:[!b&&(0,r.tZ)(eB,{onClick:()=>ep.open()}),!g&&(0,r.tZ)(T,{pub:N,user:null!=M?M:void 0})]}),!Y&&M&&(0,r.BX)(K.gq,{gap:4,children:[!b&&(0,r.tZ)(eB,{onClick:()=>ep.open()}),_?!g&&(0,r.tZ)(T,{pub:N,user:M}):(0,r.tZ)(eb,{}),!m&&(0,r.tZ)(ef,{canShowAlerts:!N||x})]}),!h&&function(e){var t,n,i,o,l,a,s,u,c,h,m;let{user:v,pub:f,freeSignup:_,freeSignupEmail:b,hide_subscribe_cta:g,isPublishContext:y,isMeetingsActive:Z,hasViralGiftsCount:C,siteConfigContext:w,getSettingFor:k,experimentApi:{exposeExperiment:x,getExperimentVariant:N},renewing:B,renewed:S,setToRenew:M,language:A,isMobile:T}=e,{iString:L,iPlural:F}=I18N.i(A);f.invite_only&&!((null==v?void 0:v.subscription_id)||(null==v?void 0:v.is_free_subscribed))&&(g=!0);let O=null==v?void 0:v.is_contributor,X=(null==v?void 0:v.is_subscribed)||O,z=(null==v?void 0:v.is_free_subscribed)||_,R=ey.oH(f)&&X&&["gift","comp"].includes(null!==(o=v.subscription_type)&&void 0!==o?o:"")&&!(0,eC.B9)({pub:f,subscriptionType:null==v?void 0:v.subscription_type})&&(0,ec.Z)(v.subscription_expiry).subtract(30,"days").isBeforeNow(),D=ey.oH(f)&&v&&ey.po(v)&&v.comp_expired_recently,U=(null==v?void 0:v.is_free_subscribed)&&(null==v?void 0:v.is_paused),j=(null==v?void 0:v.subscription_type)==="ios_app";if(O){let e=(null==v?void 0:v.dashboard_pubs)||[];return y&&1===e.length?[]:(0,r.tZ)(eS,{dashboardPubs:e,pub:f})}if(U)return(0,r.tZ)(q.zx,{"data-testid":"noncontributor-cta-button",size:T?"sm":"md",onClick:()=>{(0,I.j)(I.FP.NAV_BAR_CTA_CLICKED,{type:"unpause-subscription"}),(0,W.uX)((0,ew.BhD)(f,{addBase:!0}),{local_navigation:!1})},children:L("Unpause my subscription")});if(R||D){if(!g)return(0,r.BX)(q.zx,{"data-testid":"noncontributor-cta-button",size:T?"sm":"md",onClick:()=>{var e;(0,I.j)(I.FP.NAV_BAR_CTA_CLICKED,{type:"continue-support"}),(0,W.uX)((0,ew.W1P)(f,{utm_source:E.b3.menu,simple:!0,next:document.location.href,referring_pub_ids:(0,ek.x)("referring_pub_ids"),addBase:!0,selectedPlanId:R&&(null==v?void 0:v.is_founding)&&f.plans?null===(e=f.plans.find(e=>{var t;return null===(t=e.metadata)||void 0===t?void 0:t.founding}))||void 0===e?void 0:e.id:null}),{local_navigation:!1})},children:[(0,r.tZ)("span",{className:"mobile-only",children:L("Subscribe")}),(0,r.tZ)("span",{className:"desktop-only",children:L("Continue your support")})]})}else if(ey.oH(f)&&z&&!X&&!["thebulwark"].includes(f.subdomain)){if(!g)return(0,r.tZ)(q.zx,{"data-testid":"noncontributor-cta-button",size:T?"sm":"md",onClick:()=>{(0,I.j)(I.FP.NAV_BAR_CTA_CLICKED,{type:"upgrade-subscription"}),(0,W.uX)((0,ew.W1P)(f,{utm_source:E.b3.menu,simple:!0,next:document.location.href,referring_pub_ids:(0,ek.x)("referring_pub_ids"),addBase:!0}),{local_navigation:!1})},children:(0,ex.getSubscribeText)(f,{isFreeSubscribed:!0,isMobile:(0,W.K1)(),language:A})})}else if(ey.oH(f)?X:z||X){if(f.invite_only&&X&&!d()(v.invites)&&v.invites<f.subscriber_invites)return(0,r.tZ)(q.zx,{"data-testid":"noncontributor-cta-button",size:T?"sm":"md",onClick:()=>{(0,I.j)(I.FP.NAV_BAR_CTA_CLICKED,{type:"invite"}),(0,W.uX)((0,ew.UzE)(f),{local_navigation:!1})},children:(0,r.tZ)("span",{children:F("1 invite left","%1 invites left",f.subscriber_invites-v.invites)})});if(ey.oH(f)&&Z&&w&&!w.getConfigFor("hide_book_a_meeting_button"))return(0,r.BX)(q.zx,{"data-testid":"noncontributor-cta-button",size:T?"sm":"md",onClick:()=>{(0,I.j)(I.FP.NAV_BAR_CTA_CLICKED,{type:"book-meeting"}),(0,W.uX)((0,P.szv)(f,{params:{source:"navbar-cta"},referrer:"undefined"!=typeof window?window.location.href:void 0}),{local_navigation:!1})},children:[(0,r.tZ)("span",{className:"mobile-only",children:L("Book meeting")}),(0,r.tZ)("span",{className:"desktop-only",children:L("Book a meeting")})]});else if(ey.oH(f)&&v&&v.is_subscribed&&!j&&v.subscription_unsubscribed_at&&!["gift","comp"].includes(null!==(l=v.subscription_type)&&void 0!==l?l:""))return(0,r.BX)(q.zx,{"data-testid":"noncontributor-cta-button",size:T?"sm":"md",onClick:()=>{(0,I.j)(I.FP.NAV_BAR_CTA_CLICKED,{type:"renew"}),M()},disabled:B||S,style:{visibility:S?"hidden":"visible"},children:[(0,r.tZ)("span",{className:"mobile-only",children:L("Renew")}),(0,r.tZ)("span",{className:"desktop-only",children:L("Renew subscription")})]})}else if(!g){let e=null===(u=(0,ek.x)("referring_pub_ids"))||void 0===u?void 0:null===(s=u.split)||void 0===s?void 0:null===(a=s.call(u,","))||void 0===a?void 0:a[0],t=null===(m=(0,ek.x)("referring_pub_ids"))||void 0===m?void 0:null===(h=m.split)||void 0===h?void 0:null===(c=h.call(m,","))||void 0===c?void 0:c.slice(1);return(0,r.tZ)(q.zx,{"data-testid":"noncontributor-cta-button",size:T?"sm":"md",onClick:async()=>{let n=v&&!v.is_magic&&v.email||b;if((0,I.j)(I.FP.NAV_BAR_CTA_CLICKED,{type:"free-subscription",homepage_type:f.homepage_type}),n){let i;try{i=(await p().post("/api/v1/free").send({source:"menu",email:n,first_url:H.xY,first_referrer:H.ip,current_url:H.UE,current_referrer:H.xU,first_session_url:H.ac,first_session_referrer:H.qR,referring_pub_id:e,additional_referring_pub_ids:t})).body.referral_token,(0,I.IU)()}catch(e){(0,I.j)(I.FP.FREE_SIGNUP_FAILED,{reason:e.message,source:"menu"})}window.location.href=(0,ew.W1P)(f,{utm_source:E.b3.menu,simple:!0,next:document.location.href,skip_redirect_check:!0,just_signed_up:!0,addBase:!0,referral_token:i})}else window.location.href=(0,ew.W1P)(f,{utm_source:E.b3.menu,simple:!0,next:document.location.href,referring_pub_ids:(0,ek.x)("referring_pub_ids"),addBase:!0})},children:(0,ex.getSubscribeText)(f,{isFreeSubscribed:z,isMobile:(0,W.K1)(),language:A})})}if(ey.oH(f)&&v&&v.is_subscribed&&C){let e=(0,P.xdn)({pub:f,params:{utm_source:E.b3.menu}}),t=N("viral_gift_nav_bar_cta");if(x("viral_gift_nav_bar_cta"),["treatment_send","treatment_left"].includes(null!=t?t:"control")){let n="treatment_send"===t?L(C>1?"Send free gifts":"Send free gift"):F("1 gift left","%1 gifts left",C);return(0,r.tZ)(q.zx,{"data-testid":"noncontributor-cta-button",size:T?"sm":"md",onClick:()=>{(0,I.j)(I.FP.NAV_BAR_CTA_CLICKED,{type:"send-viral-gift"}),(0,W.uX)(e,{local_navigation:!1})},children:n})}}if(ey.oH(f)&&v&&!v.is_founding&&!j&&(0,ec.Z)(v.subscription_first_payment_at).isBefore((0,ec.Z)().subtract(48,"hours"))&&((0,eZ.VL)({pub:f})||"pinespayments"===f.subdomain||(null==f?void 0:null===(i=f.plans)||void 0===i?void 0:null===(n=i.find(e=>{var t;return null===(t=e.metadata)||void 0===t?void 0:t.founding}))||void 0===n?void 0:null===(t=n.metadata)||void 0===t?void 0:t.short_description)==="Founding Member")){let e=(0,P.yRy)({pub:f,user:v,params:{utm_source:E.b3.menu,next:document.location.href}});return(0,r.BX)(q.zx,{"data-testid":"noncontributor-cta-button",size:T?"sm":"md",onClick:()=>{(0,I.j)(I.FP.NAV_BAR_CTA_CLICKED,{type:"founding-upgrade"}),(0,W.uX)(e,{local_navigation:!1})},children:[(0,r.tZ)("span",{className:"mobile-only",children:L("Upgrade")}),(0,r.tZ)("span",{className:"desktop-only",children:L("Upgrade to founding")})]})}return"disabled"===f.payments_state&&!f.invite_only&&k("payment_pledges_enabled")&&z&&!(null==v?void 0:v.is_pledged)?(0,r.tZ)(q.zx,{"data-testid":"noncontributor-cta-button",size:T?"sm":"md",onClick:()=>{(0,I.j)(I.FP.NAV_BAR_CTA_CLICKED,{type:"pledge-subscription"}),(0,W.uX)((0,ew.W1P)(f,{utm_source:E.b3.menu,next:document.location.href,addBase:!0}),{local_navigation:!1})},children:L("Pledge your support")}):ey.oH(f)&&!f.invite_only?(0,r.BX)(q.zx,{"data-testid":"noncontributor-cta-button",size:T?"sm":"md",onClick:()=>{(0,I.j)(I.FP.NAV_BAR_CTA_CLICKED,{type:"gift-subscription"}),(0,W.uX)((0,eZ.HD)({pub:f})&&v&&(null==w?void 0:w.getConfigFor("enable_founding_gifts"))?(0,eZ.Iv)({user:v}):(0,ew.W1P)(f,{utm_source:E.b3.menu,gift:!0,next:document.location.href,addBase:!0}),{local_navigation:!1})},children:[(0,r.tZ)("span",{className:"mobile-only",children:L("Give gift")}),(0,r.tZ)("span",{className:"desktop-only",children:L("Gift a subscription")})]}):!f.is_on_substack||(null==v?void 0:v.has_publication)?null:(0,r.tZ)(q.zx,{"data-testid":"noncontributor-cta-button",size:T?"sm":"md",onClick:()=>{(0,I.j)(I.FP.NAV_BAR_CTA_CLICKED,{type:"start-publishing"}),(0,W.uX)((0,ew._HV)({utm_source:E.b3.menu}),{local_navigation:!1})},children:L("Start publishing")})}({pub:N,user:M,freeSignup:s,freeSignupEmail:u,hide_subscribe_cta:Z,viralGiftsConfig:N.viralGiftsConfig,isPublishContext:x,localeContext:t,siteConfigContext:e,isMeetingsActive:w,hasViralGiftsCount:k,getSettingFor:ee,experimentApi:et,renewing:en,renewed:er,setToRenew:eu,language:G,isMobile:Y}),!y&&(0,r.tZ)(X.Co,{pub:N,user:M,enableCustomerServiceMode:ea?eh:void 0,disableCustomerServiceMode:es?ed:void 0,fixedTooltip:l})]})})})}),ea&&(0,r.tZ)(L.h,{children:(0,r.tZ)(f.p,{className:"account-info-customer-support-mode-modal",ref:$,openByDefault:B&&ea,children:(0,r.tZ)(v.Z,{redirect:(0,ek.x)("redirect")||"/publish/home",onCancel:e=>{var t;return null===(t=$.current)||void 0===t?void 0:t.close(e)},requiresMfa:null==M?void 0:M.requires_global_admin_mfa_challenge})})})]})};var eM=n(49336),eA=n(56743),eP=n(2564),eE=n(94499),eT=n(17043);let eL={subMenuTrigger:"subMenuTrigger-SKUcXd",subMenuItem:"subMenuItem-zrY1yO",disabled:"disabled-TCpkl9",logo:"logo-Jt_Kvr",chevron:"chevron-_e2GYQ"};function eF(e){let{className:t,hideBorders:n,items:i,menuItemClassName:l,selectedMenuItemClassName:s,selectedSlug:d,pub:u}=e,{isMobile:c}=(0,J.v9)(),h=(0,o.sO)(null),[m,p]=(0,o.eJ)(!1),[v,f]=(0,o.eJ)(!1);function _(e){let{scrollLeft:t,scrollWidth:n,clientWidth:i}=e;p(t>10),f(n-(i+t)>10)}let b=e=>()=>{let{current:t}=h;t&&t.scrollBy({left:250*e,behavior:"smooth"})};return(0,o.d4)(()=>{_(h.current)},[]),(0,r.tZ)("div",{className:a()("overflow-list-container",t),children:(0,r.BX)(K.gq,{borderBottom:n?void 0:"detail",borderTop:n||c?void 0:"detail",className:a()("section-bar",{scroll:!0,"overflow-left":m,"overflow-right":v}),font:"text",height:c?44:48,justifyContent:c?"start":"center",paddingX:4,position:"relative",children:[(0,r.tZ)("div",{ref:h,className:"overflow-items",onScroll:e=>_(e.target),children:i.map(e=>{let{label:t,href:n,slug:i,isNative:o,onClick:c,noFollow:h,subItems:m,newTab:p}=e;return m?(0,r.tZ)(A.v2,{hideOnScroll:!0,layerOptions:{placement:"bottom-start",triggerOffset:6},title:t,trigger:(0,r.tZ)("div",{className:a()("menu-item",{selected:i===d},l,s&&{[s]:i===d}),children:(0,r.BX)(eE.Z,{className:eL.subMenuTrigger,native:o,rel:h?"nofollow":null,onClick:c,children:[(0,r.tZ)("span",{className:"overflow-item-text",children:t}),(0,r.tZ)(eM.Z,{className:eL.chevron,size:16})]})}),children:m.map(e=>{let{label:t,href:n,slug:i,isNative:o,onClick:l,noFollow:s,logoUrl:d}=e,c=!!i&&parseInt("".concat(i))===(null==u?void 0:u.id),h=d||(null==u?void 0:u.logo_url);return(0,r.tZ)(A.sN,{className:a()(eL.subMenuItem,{[eL.disabled]:c}),disabled:c,href:n,native:o,priority:"primary",rel:s?"nofollow":void 0,onClick:l,children:(0,r.BX)(K.gq,{alignItems:"center",gap:12,style:{margin:"-4px 0 -4px -4px"},children:[h&&(0,r.tZ)("img",{className:eL.logo,src:(0,eT.zF)(h,64),width:32}),t]})})})}):(0,r.tZ)("div",{className:a()("menu-item",{selected:i===d},l,s&&{[s]:i===d}),children:(0,r.tZ)(eE.Z,{href:n,native:o,newTab:p,rel:h?"nofollow":null,onClick:c,children:(0,r.tZ)("span",{className:"overflow-item-text",children:t})})})})}),(0,r.tZ)("div",{className:"left-button",children:(0,r.tZ)("div",{className:"scroll-button-hitbox",role:"button",onClick:b(-1),children:(0,r.tZ)(eA.Z,{strokeWidth:1.5})})}),(0,r.tZ)("div",{className:"right-button",children:(0,r.tZ)("div",{className:"scroll-button-hitbox",role:"button",onClick:b(1),children:(0,r.tZ)(eP.Z,{strokeWidth:1.5})})})]})})}var eO=n(48884),eX=n(76819);let ez={zeteo:{121146:"We’re Not Kidding"}},eR=["/about","/chat","/archive","/newsletters"],eD=e=>{let{isChatActive:t,isMeetingsActive:n,pub:i,selectedSectionId:o}=e,{language:l}=(0,S.M1)(),{getSettingFor:a}=(0,U.So)(),{getConfigFor:s}=(0,j.xR)(),d=!!s("publication_tabs_reorder"),u=!!a("notes_feed_enabled"),c=!!(a("reader_referrals_enabled")&&a("reader_referrals_leaderboard_enabled")),h=eU({groupNewsletters:!!a("group_sections_and_podcasts_in_menu_enabled"),navBarItems:(0,eX.Rx)(i.navigationBarItems||[],{isFeedEnabled:u,isChatActive:!!t,isChatEnabled:!!i.threads_v2_enabled,isMeetingsActive:!!n,hasMultipleNewsletters:i.sections&&i.sections.length>0,isReaderReferralsLeaderboardActive:c,language:l,useReordering:d}).filter(e=>!e.is_hidden),pub:i,language:l});return(0,r.tZ)(eF,{items:h,className:"sections-overflow",selectedSlug:o,pub:i})},eU=e=>{let{groupNewsletters:t,navBarItems:n,pub:i,language:r}=e,{iString:o}=eO.mb.i(r),l=[];l.push({href:"/",label:o("Home"),slug:"/home"}),i.podcast_enabled&&i.show_pub_podcast_tab&&l.push({href:"/podcast",label:o("Podcast"),slug:"/podcast"});let a=[];return(0,eZ.jC)({pub:i})?a=ej({navBarItems:n,groups:[{condition:e=>{var t;return(null===(t=e.section)||void 0===t?void 0:t.id)===118995},excludeFromOthers:!0,isStandalone:!0},{condition:e=>{var t;return(null===(t=e.section)||void 0===t?void 0:t.id)===121146},excludeFromOthers:!0,isStandalone:!0},{label:"Shows",condition:e=>{var t,n;return!!(null===(t=e.section)||void 0===t?void 0:t.is_podcast)||(null===(n=e.postTag)||void 0===n?void 0:n.slug)==="townhall"}},{label:"Columns",condition:e=>{var t,n;return!!e.section&&!(null===(t=e.section)||void 0===t?void 0:t.is_podcast)&&(null===(n=e.section)||void 0===n?void 0:n.id)!==132068}},{label:"Documentaries",condition:e=>{var t,n;return(null===(t=e.section)||void 0===t?void 0:t.id)===132068||(null===(n=e.section)||void 0===n?void 0:n.id)===214805}}]}):(0,eZ.VL)({pub:i})?(l.push({href:"/listen",label:"Shows",slug:"/listen"}),a=ej({navBarItems:n.filter(e=>!e.section||!e.section.is_podcast||(0,ex.sectionIsSpecificallyMarkedAsNewsletter)({section:e.section,pub:i})),groups:[{label:"Newsletters",condition:e=>!!e.section}]})):a=(0,eZ.p$)({pub:i})?ej({navBarItems:n,groups:[{label:"Projects",condition:e=>{var t,n;return[146942,146943,150226].includes(null!==(n=null===(t=e.section)||void 0===t?void 0:t.id)&&void 0!==n?n:-1)},excludeFromOthers:!0},{label:"News / Research",condition:e=>{var t,n;return[146936,146935].includes(null!==(n=null===(t=e.section)||void 0===t?void 0:t.id)&&void 0!==n?n:-1)},excludeFromOthers:!0},{label:"Calls-to-Action",condition:e=>{var t,n;return[146939,146941,146949].includes(null!==(n=null===(t=e.section)||void 0===t?void 0:t.id)&&void 0!==n?n:-1)},excludeFromOthers:!0},{label:"Recommendations",condition:e=>{var t,n;return[146958].includes(null!==(n=null===(t=e.section)||void 0===t?void 0:t.id)&&void 0!==n?n:-1)||"https://bookshop.org/shop/globalfreedoms"===e.link_url},excludeFromOthers:!0},{label:"Podcasts",condition:e=>{var t;return!!(null===(t=e.section)||void 0===t?void 0:t.is_podcast)},excludeFromOthers:!0}]}):t?ej({navBarItems:n,groups:[{label:o("Newsletters"),condition:e=>{var t;return!!e.section&&!(null===(t=e.section)||void 0===t?void 0:t.is_podcast)}},{label:o("Podcasts"),condition:e=>{var t;return!!(null===(t=e.section)||void 0===t?void 0:t.is_podcast)}}]}):n,[...l,...eH({groupedNavBarItems:a,pub:i})]},ej=e=>{let{navBarItems:t,groups:n}=e,i=[...t],r=[],o=[...t];for(let e of n)if(e.isStandalone){let t=i.find(e.condition);if(!t)continue;r.push(t),o=o.filter(e=>e!==t),e.excludeFromOthers&&(i=i.filter(e=>e!==t))}else{var l;let t=i.filter(e.condition);if(0===t.length)continue;r.push({label:null!==(l=e.label)&&void 0!==l?l:"Other",navBarItems:t}),o=o.filter(t=>!e.condition(t)),e.excludeFromOthers&&(i=i.filter(t=>!e.condition(t)))}return[...r,...o]},eH=e=>{let{groupedNavBarItems:t,pub:n}=e;return t.map(e=>"navBarItems"in e?{label:e.label,subItems:e.navBarItems.map(e=>eV({navBarItem:e,pub:n}))}:eV({navBarItem:e,pub:n}))},eV=e=>{var t,n,r,o,l,a;let{navBarItem:s,pub:d}=e;if(s.section){let e=s.section,a=e.is_podcast&&null!==(o=null===(n=d.sections.find(t=>t.id===e.id))||void 0===n?void 0:null===(t=n.podcastSettings)||void 0===t?void 0:t.podcast_art_url)&&void 0!==o?o:e.logo_url;return(0,c._)((0,i._)({label:null!==(l=null===(r=ez[d.subdomain])||void 0===r?void 0:r[e.id])&&void 0!==l?l:(0,ex.truncateText)(e.name,30),href:(0,P.Ucy)(d,{section:e})},a?{logoUrl:a}:null),{slug:e.id})}let u="link"===(0,eX.Hs)(s)&&!(s.standard_key||eR.includes(null!==(a=s.link_url)&&void 0!==a?a:"")),h=u&&d.tier<2;return(0,c._)((0,i._)({href:(0,P.Oz)(d,s,{addBase:u}),label:(0,ex.truncateText)((0,eX.ye)(s),30)},h?{noFollow:h}:null),{slug:(0,P.Oz)(d,s,{addBase:!1}),newTab:u})};var eW=n(39693),eJ=n.n(eW),eq=n(36515);let eK=e=>{let{hasMeetingsBooked:t,isMeetingsActive:n,pub:i,selectedSectionId:o,user:l}=e,{language:s}=(0,S.M1)(),{iString:d}=eO.mb.i(s),u=[{href:(0,ew.QK7)(i),label:d("Home"),slug:"/publish/home"},{href:"/publish/posts",label:d("Posts"),slug:"/publish/posts"},...(null==l?void 0:l.is_admin)?eJ()([{href:(0,ew.dIB)(i),label:d("Subscribers"),slug:"/publish/subscribers"},{href:"/publish/stats",label:d("Stats"),slug:"/publish/stats"},{href:(0,ew.jHQ)(i),label:d("Podcast"),slug:"/publish/podcasting"},{href:(0,eq.r)(i,{noBase:!0}),label:d("Chat"),slug:"/publish/chat"},{href:"/publish/recommendations",label:d("Recommendations"),slug:"/publish/recommendations"},(n||!!t)&&{href:"/publish/meetings",label:d("Meetings"),slug:"/publish/meetings"},{href:(0,ew.wI3)(i),label:d("Settings"),slug:"/publish/settings"}]):[]];return(0,r.tZ)(eF,{items:u,className:a()("sections-overflow","publish-menu"),selectedSlug:o,pub:i})},eG=()=>Math.max(document.documentElement.scrollTop||document.body.scrollTop,0),eY=e=>{let{alwaysShow:t,disable:n,menuContentRef:i,menuHeight:r}=e,l=(0,o.sO)(!1),a=(0,o.sO)(eG()),s=(0,o.sO)(eG()),d=(0,o.I4)((e,t)=>{a.current=t,i.current&&(i.current.style.position=e,i.current.style.top="fixed"===e&&t>=0?"":"".concat(t,"px"))},[i]),u=(0,o.I4)(()=>{d("absolute",eG()-r),l.current=!1},[r,d]),c=(0,o.I4)(e=>{let t=e.target;((null==t?void 0:t.classList.contains("footnote-number"))||(null==t?void 0:t.classList.contains("footnote-anchor")))&&(l.current=!0,setTimeout(u,0))},[u]),h=(0,o.I4)(()=>{var e;if(t){d("fixed",0);return}if(l.current)return;let o=s.current;s.current=eG();let u=s.current,c=(null===(e=i.current)||void 0===e?void 0:e.style.position)==="fixed",h=u<=0||0>=(0,W.bs)(),m=u>=(0,W.bs)(),p=u>o,v=u<o;if(h){d("fixed",0);return}if(n){d("absolute",0);return}if(!m){if(p){if(c&&a.current>=0){d("absolute",u);return}if(!c&&a.current<u-r){d("fixed",-r);return}}if(v){if(a.current>u){d("fixed",u);return}let e=Math.max(u-r,0);if(a.current<e){d("absolute",e);return}}}},[t,i,n,d,r]);(0,o.d4)(()=>{if("undefined"!=typeof window)return window.addEventListener("scroll",h),window.addEventListener("click",c),h(),()=>{window.removeEventListener("scroll",h),window.removeEventListener("click",c)}},[n,c,h,d])};var eQ=n(63474),e$=n(58175);let e0={mainMenuContent:"mainMenuContent-DME8DR",topBar:"topBar-pIF0J1",titleWithWordmark:"titleWithWordmark-GfqxEZ",titleContainer:"titleContainer-DJYq5v",title:"title-oOnUGd",buttonsContainer:"buttonsContainer-SJBuep",logoContainer:"logoContainer-p12gJb"},e1=e=>{var t;let{className:n,freeSignup:l,freeSignupEmail:s,hasMeetingsBooked:d,hasViralGiftsCount:c,hideNavBar:h,hideTitle:m,isAccountContext:p,isChatActive:v,isMeetingsActive:f,isPostView:_,isPublishContext:b,pub:g,selectedSectionId:y,showCustomerSupportModeModal:Z,user:C}=e;m="profile"===g.homepage_type||m;let{getConfigFor:w}=(0,j.xR)(),{isMobile:k}=(0,J.v9)(),x=(0,o.sO)(null),N=(0,o.sO)(null),B=(0,o.sO)(null),S="profile"===g.homepage_type,M=!S&&!!g.logo_url&&!(0,eZ.kb)({pub:g}),A=!!(!m&&g.logo_url_wide),E=_?!!w("show_menu_on_posts"):!h,T=(0,eZ.kb)({pub:g})||!!(w("larger_wordmark_on_publication_homepage")&&A),{currentMenuHeight:L,currentTopBarHeight:X,isMinimized:z,maxMenuHeight:R}=e2({hasExpandableTopBar:T,forceMaximized:!_&&!p&&!b,forceMinimized:!!(p||b),isMobile:k,showNavBar:E,showWordmark:A}),D=!k&&T&&z?20:0,U=k?T?32:20:T?72:36,H=!k&&T&&z?.5555555555555556:1;eY({alwaysShow:!!b,disable:!_,menuContentRef:x,menuHeight:L});let{shouldCenterTitle:V}=e4({buttonsRef:B,titleRef:N,horizontalGap:12,horizontalPadding:T?40:20}),W=k||!V,q=p||b?(0,P.SVA)(g):"/",Y=p||b?F.w:O.h;return(0,r.tZ)(Y,{children:(0,r.BX)("div",{className:a()("main-menu",n),"data-testid":"navbar",children:[(0,r.BX)("div",{ref:x,className:e0.mainMenuContent,children:[(0,r.BX)(K.gq,{alignItems:"center",borderBottom:E?void 0:"detail-themed",className:e0.topBar,gap:12,justifyContent:"space-between",paddingBottom:k?12*!E:void 0,paddingTop:k?12:void 0,paddingX:k?12:T?40:20,style:k?void 0:{height:X},children:[(0,r.BX)("div",{className:e0.logoContainer,style:(0,i._)({display:S||M||!W?null:"none",flexBasis:0,flexGrow:+!W},T?{transform:"translateX(-".concat(D,"px)")}:null),children:[S&&(0,r.tZ)(K.hs,{alignItems:"center",as:"a",height:20,href:"https://substack.com",justifyContent:"center",tabIndex:-1,width:20,children:k?(0,r.tZ)(u.Z,{height:24}):(0,r.tZ)(u.Z,{style:{transform:"scale(1.4)"}})}),M&&(0,r.tZ)(G.jM,{href:q,pub:g,size:k?32:40,onClick:()=>{(0,I.j)(I.FP.NAV_BAR_HOME_LINK_CLICKED)}})]}),!m&&(0,r.tZ)("div",{ref:N,className:e0.titleContainer,style:(0,i._)({flexGrow:0},T?{transform:"translateX(".concat(W?-D:0,"px)")}:null),children:(0,r.tZ)(e$.xv,{as:"h1",className:a()(e0.title,{[null!==(t=e0.titleWithWordmark)&&void 0!==t?t:""]:g.logo_url_wide}),font:"pub-headings",children:(0,r.tZ)(eQ.A0,{href:q,children:g.logo_url_wide?(0,r.tZ)("img",{alt:g.name,src:(0,P.zF4)(g.logo_url_wide,null,{height:2*U,crop:"limit",leadingSegments:["e_trim:10:white","e_trim:10:transparent"]}),style:(0,i._)({display:"block",height:U},T?{transform:"scale(".concat(H,")"),transformOrigin:W?"left":"center"}:null)}):g.name})})}),(0,r.tZ)(K.gq,{justifyContent:"end",style:{flexBasis:0,flexGrow:1},children:(0,r.tZ)("div",{ref:B,className:e0.buttonsContainer,style:T?{transform:"translateX(".concat(D,"px)")}:void 0,children:(0,r.tZ)(eI,{freeSignup:l,freeSignupEmail:s,hasViralGiftsCount:c,isAccountContext:p,isMeetingsActive:f,isPublishContext:b,pub:g,showCustomerSupportModeModal:Z,user:C})})})]}),E&&(b?(0,r.tZ)(eK,{hasMeetingsBooked:d,isMeetingsActive:f,pub:g,selectedSectionId:y,user:C}):(0,r.tZ)(eD,{isChatActive:v,isMeetingsActive:f,pub:g,selectedSectionId:y}))]}),(0,r.tZ)("div",{style:{height:R}})]})})},e2=e=>{let{forceMaximized:t,forceMinimized:n,hasExpandableTopBar:i,isMobile:r,showNavBar:l,showWordmark:a}=e,[s,u]=(0,o.eJ)(!1),c=(0,o.sO)(null),h=!!n||!t&&s,m=e=>r?l?44:56:i?e?72:120:a?88:72,p=l?r?45:50:0,v=m(n)+p,f=m(h),_=(0,o.I4)(()=>{let e=c.current,t=document.documentElement.scrollTop||document.body.scrollTop;if(c.current=t,!d()(e))t>e?t>v+5&&u(!0):t<=0&&u(!1)},[v]);return(0,o.d4)(()=>(window.addEventListener("scroll",_),()=>window.removeEventListener("scroll",_)),[_]),{currentMenuHeight:f+p,currentTopBarHeight:f,isMinimized:h,maxMenuHeight:v}},e4=e=>{let{buttonsRef:t,titleRef:n,horizontalGap:i,horizontalPadding:r}=e,{isMobile:l}=(0,J.v9)(),[a,s]=(0,o.eJ)(!l),d=(0,o.I4)(()=>{if(!t.current||!n.current)return;if(l){s(!1);return}let e=t.current.getBoundingClientRect().width,o=n.current.getBoundingClientRect().width;s(.5*document.body.clientWidth-e-i-r>.5*o)},[t,i,r,l,n]);return(0,o.d4)(()=>(window.addEventListener("resize",d),d(),setTimeout(d,0),()=>{window.removeEventListener("resize",d)}),[d]),{shouldCenterTitle:a}}},21061:function(e,t,n){n.d(t,{l:()=>a});var i=n(30396),r=n(24350),o=n.n(r),l=n(81977);let a=e=>{let{pub:t}=e,n=o()(t.sections,"id"),{setting:r,save:a}=(0,l.m)({key:"archived_section_ids",fallback:[]}),[s,d]=(0,i.eJ)(r),[u,c]=(0,i.eJ)(!1),h=async()=>{c(!0),await a({setting:s})};return{isSaving:u,ids:s,onChange:e=>{let{ids:t}=e;d(t.filter(e=>n[e]))},onSave:h}}},73207:function(e,t,n){n.d(t,{I:()=>d});var i=n(30396),r=n(24350),o=n.n(r),l=n(78718),a=n.n(l),s=n(81977);let d=e=>{let{pub:t,pubSetting:n="column_section_ids"}=e,r=o()(null==t?void 0:t.sections,"id"),{setting:l,save:d}=(0,s.m)({key:n,fallback:{metadata:{},order:[]}}),[u,c]=(0,i.eJ)(l.order),[h,m]=(0,i.eJ)(l.metadata),[p,v]=(0,i.eJ)(!1),f=async()=>{v(!0),await d({setting:{order:u,metadata:a()(h,u)}})};return{isSaving:p,metadata:h,ids:u,onChangeMetadata:e=>{let{metadata:t}=e;m(t)},onChangeOrder:e=>{let{ids:t}=e;c(t.filter(e=>r[e]))},onSave:f}}},98130:function(e,t,n){n.d(t,{L:()=>d});var i=n(30396),r=n(39693),o=n.n(r),l=n(24350),a=n.n(l),s=n(81977);let d=e=>{let{pub:t}=e,n=a()(t.sections,"id"),{setting:r,save:l}=(0,s.m)({key:"event_section_ids",fallback:[]}),[d,u]=(0,i.eJ)(r),[c,h]=(0,i.eJ)(!1),m=async()=>{h(!0),await l({setting:d})};return{initialSections:o()(r.map(e=>n[e])),isSaving:c,ids:d,sections:o()(d.map(e=>n[e])),onChange:e=>{let{ids:t}=e;u(t.filter(e=>n[e]))},onSave:m}}},81977:function(e,t,n){n.d(t,{m:()=>r});var i=n(56629);let r=e=>{let t,{key:n,fallback:r}=e,{getSettingFor:o,changeSetting:l}=(0,i.So)(),a=o(n);try{t=a?JSON.parse(a):r}catch(e){t=r}return{setting:t,save:async e=>{let{setting:t}=e;await l({[n]:JSON.stringify(t)})}}}},94778:function(e,t,n){n.d(t,{c:()=>h});var i=n(30396),r=n(39693),o=n.n(r),l=n(24350),a=n.n(l),s=n(78718),d=n.n(s),u=n(81977);let c=["mediumYellow","darkGreen","mediumRed","darkOrange","mediumPurple","mediumBlue"],h=e=>{let{pub:t}=e,n=a()(t.sections,"id"),{setting:r,save:l}=(0,u.m)({key:"video_section_ids",fallback:{metadata:{},order:[]}});for(let e=0;e<r.order.length;e++){var s,h,m;let t=r.order[e];t&&((null===(s=r.metadata[t])||void 0===s?void 0:s.carouselColor)||(r.metadata[t]={youtubeUrl:null!==(m=null===(h=r.metadata[t])||void 0===h?void 0:h.youtubeUrl)&&void 0!==m?m:"",carouselColor:c[e%c.length]}))}let[p,v]=(0,i.eJ)(r.order),[f,_]=(0,i.eJ)(r.metadata),[b,g]=(0,i.eJ)(!1),y=async()=>{g(!0),await l({setting:{order:p,metadata:d()(f,p)}}),window.location.reload()};return{initialSections:o()(r.order.map(e=>n[e])),isSaving:b,metadata:f,ids:p,sections:o()(p.map(e=>n[e])),onChangeMetadata:e=>{let{metadata:t}=e;_(t)},onChangeOrder:e=>{let{ids:t}=e;v(t.filter(e=>n[e]))},onSave:y}}},12757:function(e,t,n){n.d(t,{Co:()=>X});var i=n(7409),r=n(99282),o=n(98848),l=n(16584),a=n(30396),s=n(94184),d=n.n(s),u=n(66120),c=n(24840),h=n(43061),m=n(84488),p=n(86374),v=n(83320),f=n(87698),_=n(89320),b=n(9997),g=n(78327);let y=(0,n(6400).createContext)(!1);var Z=n(95441),C=n(36518),w=n(68833),k=n(43251),x=n(98422),N=n(94874),B=n(17540),S=n(15771),I=n(19081),M=n(44424),A=n(58175),P=n(60308),E=n(63651),T=n(47929),L=n(75983);let F=T.b3.userMenu,O="https://support.substack.com/hc/en-us/?utm_source=".concat(F);function X(e){var{user:t,pub:n}=e,s=(0,o._)(e,["user","pub"]);let{iString:u}=(0,Z.M1)(),c=(0,a.qp)(y),{isMobile:h}=(0,x.v9)();return(0,l.tZ)(l.HY,{children:t?(0,l.tZ)(z,(0,r._)((0,i._)({},s),{user:t,pub:n})):(0,l.tZ)(S.zx,{href:(0,P.uXE)({for_pub:null==n?void 0:n.subdomain}),priority:"tertiary",size:h?"sm":"md",className:d()({"force-desktop":c}),native:!0,children:u("Sign in")})})}function z(e){let{user:t,pub:n,enableCustomerServiceMode:i,disableCustomerServiceMode:r,freeSignup:o}=e,{iString:a}=(0,Z.M1)(),{activityUnreadCount:s}=(0,C.lR)(),{isMobile:d}=(0,x.v9)(),h=e=>()=>{(0,w.j)(e)},m=d||!t.photo_url?(0,l.tZ)(S.hU,{priority:"tertiary",size:"sm",children:(0,l.tZ)(u.Z,{size:20})}):(0,l.tZ)(S.kG,{resetCss:!0,position:"relative",className:L.Z.avatarButton,showFocus:!0,animate:!0,radius:"full",children:(0,l.tZ)(B.Ct,{priority:"secondary",theme:"default",fillIcon:!0,placement:"bottom-right",content:(0,l.tZ)(p.Z,{size:14}),children:(0,l.tZ)(N.qE,{user:t,size:d?32:40,"aria-hidden":!0})})});return(0,l.BX)(M.v2,{trigger:m,onOpen:()=>(0,w.j)(w.FP.USER_MENU_OPENED),onClose:()=>(0,w.j)(w.FP.USER_MENU_DISMISSED),className:L.Z.dropdown,ariaLabel:a("More options"),children:[(0,l.tZ)(R,{user:t}),(0,l.BX)(M.xw,{children:[(0,l.tZ)(M.sN,{href:(0,P.E2n)({urlParams:{utm_source:F}}),onClick:h(w.FP.USER_MENU_FEED_CLICKED),leading:(0,l.tZ)(I.hs,{children:(0,l.tZ)(_.Z,{size:20})}),native:!0,children:a("Home")}),(0,l.tZ)(M.sN,{href:(0,P.HMK)({utm_source:F}),onClick:h(w.FP.USER_MENU_READER_CLICKED),leading:(0,l.tZ)(I.hs,{children:(0,l.tZ)(b.Z,{size:20})}),native:!0,children:a("Subscriptions")}),(0,l.tZ)(M.sN,{href:(0,E.Cnj)(),onClick:h(w.FP.USER_MENU_CHAT_CLICKED),leading:(0,l.tZ)(I.hs,{children:(0,l.tZ)(f.Z,{size:20})}),native:!0,children:a("Chat")}),(0,l.tZ)(M.sN,{href:(0,P.Fu$)({utm_source:F}),onClick:h(w.FP.USER_MENU_ACTIVITY_CLICKED),leading:(0,l.tZ)(I.hs,{children:(0,l.tZ)(v.Z,{size:20})}),native:!0,children:(0,l.BX)(I.hs,{flex:"grow",justifyContent:"space-between",children:[a("Activity"),s>0&&(0,l.tZ)(g.V,{className:"indicator-badge",count:s})]})}),(0,l.tZ)(M.sN,{href:(0,P._P8)(),onClick:h(w.FP.USER_MENU_DISCOVER_CLICKED),leading:(0,l.tZ)(I.M5,{width:20,height:20,children:(0,l.tZ)(c.Z,{size:16,strokeWidth:2})}),native:!0,children:a("Explore")})]}),(0,l.tZ)(D,{freeSignup:null!=o&&o,pub:null!=n?n:null,user:t}),(0,l.tZ)(U,{pub:null!=n?n:null}),!t.reader_installed_at&&(0,l.tZ)(M.xw,{children:(0,l.tZ)(M.sN,{href:(0,P.tSX)({utm_campaign:T.VX.appMarketing,utm_content:T.fZ.userMenuLink}),priority:"accent",native:!0,children:a("Get the app")})}),(0,l.tZ)(j,{enableCustomerServiceMode:i,disableCustomerServiceMode:r,pub:null!=n?n:null,user:t}),(0,l.tZ)(H,{pub:null!=n?n:null})]})}let R=e=>{let{user:t}=e,{iString:n}=(0,Z.M1)(),i=(0,k.Lw)(t,{utm_source:F}),r="",o="";return t&&(r=(null==t?void 0:t.profile_set_up_at)&&t.name?t.name:t.email,o=(null==t?void 0:t.profile_set_up_at)?t.handle?"@".concat(t.handle):null:n("Set up your profile")),(0,l.tZ)(M.sN,{href:i,onClick:()=>(0,w.j)(w.FP.USER_MENU_PROFILE_CLICKED),native:!0,children:(0,l.BX)(I.hs,{gap:12,alignItems:"center",children:[(0,l.tZ)(N.qE,{size:40,user:null!=t?t:void 0,"aria-hidden":!0}),(0,l.BX)(I.tu,{flex:"grow",children:[(0,l.tZ)(A.xv.B4,{weight:"semibold",children:r}),o&&(0,l.tZ)(A.xv.B4,{color:"secondary",children:o})]})]})})},D=e=>{let{freeSignup:t,user:n,pub:i}=e,{iString:r}=(0,Z.M1)(),o=i&&(t||n&&(n.is_subscribed||n.is_free_subscribed)),a=!!(null==n?void 0:n.subdomain);return a||o?(0,l.BX)(M.xw,{children:[o&&(0,l.tZ)(M.sN,{href:(0,P.n1t)("/account",{utm_source:F}),onClick:()=>(0,w.j)(w.FP.USER_MENU_MANAGE_SUBSCRIPTION_CLICKED),priority:"secondary",native:!0,children:r("Manage subscription")}),a&&n.subdomain&&(0,l.tZ)(M.sN,{priority:"secondary",href:(0,P.c0Q)(n.subdomain,{params:{utm_source:T.b3.substack}}),native:!0,trailing:(0,l.tZ)(h.Z,{}),children:r("Dashboard")})]}):null},U=e=>{let{pub:t}=e,{iString:n}=(0,Z.M1)();return(0,l.BX)(M.xw,{children:[(0,l.tZ)(M.sN,{href:(0,P.v3t)({utm_source:F}),onClick:()=>(0,w.j)(w.FP.USER_MENU_ACCOUNT_SETTINGS_CLICKED),priority:"secondary",native:!0,children:n("Settings")}),(0,l.tZ)(M.sN,{href:O,priority:"secondary",children:n("Support")}),(0,l.tZ)(M.sN,{href:(0,P.ZPN)({utm_source:F,for_pub:null==t?void 0:t.subdomain}),priority:"secondary",native:!0,children:n("Sign out")})]})},j=e=>{let{disableCustomerServiceMode:t,enableCustomerServiceMode:n,pub:i,user:r}=e;return(null==r?void 0:r.is_global_admin)&&(n||t)?(0,l.BX)(M.xw,{children:[n&&(0,l.tZ)(M.sN,{priority:"secondary",onClick:n,trailing:(0,l.tZ)(m.Z,{}),native:!0,children:"Enter support mode"}),t&&(0,l.tZ)(M.sN,{priority:"secondary",onClick:t,trailing:(0,l.tZ)(m.Z,{}),native:!0,children:"Exit support mode"}),i&&(0,l.tZ)(M.sN,{priority:"secondary",href:"".concat((0,E.SVA)({subdomain:"admin"}),"/publications/").concat(i.id),trailing:(0,l.tZ)(m.Z,{}),native:!0,children:"Open in Underground"})]}):null},H=e=>{let{pub:t}=e,{iString:n}=(0,Z.M1)();return(0,l.tZ)(M.xw,{children:(0,l.tZ)(A.xv.B4,{size:12,color:"secondary",children:(0,l.BX)(I.hs,{gap:12,padding:8,className:"footer",children:[(0,l.tZ)(A.hh,{href:(0,P.cdl)({utm_source:F}),children:n("About")}),(0,l.tZ)(A.hh,{href:(0,P.RF2)({pub:t,utm_source:F}),children:n("Privacy")}),(0,l.tZ)(A.hh,{href:(0,P.P8A)({pub:t,utm_source:F}),children:n("Terms")}),(0,l.tZ)(A.hh,{href:(0,P.WFt)({utm_source:F}),children:n("Data")})]})})})}},98585:function(e,t,n){n.d(t,{Ml:()=>u});var i=n(16584),r=n(6400),o=n(30396),l=n(42441),a=n.n(l),s=n(74312);let d=(0,r.createContext)({open:()=>void 0});function u(e){let{children:t,load:r,useLocalNavigation:l}=e,[u,c]=(0,o.eJ)(!1);(0,o.d4)(()=>{if(!r)return;let e=e=>{e.preventDefault(),c(!0)};return a().bind(["/","command+k"],e),()=>{a().unbind(["/",e]),a().unbind(["command+k",e])}},[r]);let h=(0,o.Ye)(()=>({open:()=>{r&&c(!0)}}),[r]);return r?(0,i.BX)(d.Provider,{value:h,children:[t,(0,i.tZ)(s.cr,{module:"@/frontend/substack/GlobalSearch",resolve:e=>e.GlobalSearch,onRequest:()=>Promise.all([n.e("546"),n.e("5850"),n.e("8842"),n.e("2290")]).then(n.bind(n,81202)),isOpen:u,onClose:()=>c(!1),useLocalNavigation:l})]}):(0,i.tZ)(i.HY,{children:t})}},35543:function(e,t,n){n.d(t,{Sv:()=>M,Xe:()=>B,oJ:()=>S,oh:()=>I,yr:()=>A});var i=n(7409),r=n(99282),o=n(58865),l=n(16584),a=n(30396),s=n(82569),d=n.n(s),u=n(94734),c=n(17520),h=n(69241),m=n(19548),p=n(95441),v=n(60807),f=n(54371),_=n(6910),b=n(48980),g=n(63018),y=n(98914),Z=n(44424),C=n(70379),w=n(88817),k=n(23945);function x(){let e=(0,o._)(["Followed ",""]);return x=function(){return e},e}function N(){let e=(0,o._)(["Unfollowed ",""]);return N=function(){return e},e}function B(e){let t=(0,v.aF)();return(0,g._I)("/api/v1/feed/following",(0,i._)({auto:!!t},e))}function S(){let{mutate:e}=(0,h.kY)();return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e("/api/v1/feed/following",...n)}}function I(e,t,n){let{isFollowing:i,toggle:r}=M(e,t,n),o=(0,v.aF)(),a=(0,m.gc)(null==e?void 0:e.id),s=!!(o&&e&&o.id!==e.id)&&!a,d=[];return s&&d.push((0,l.tZ)(Z.sN,{leading:i?(0,l.tZ)(_.m,{stroke:"var(--color-fg-primary)"}):(0,l.tZ)(f.w,{stroke:"var(--color-fg-primary)"}),onClick:r,children:i?"Unfollow":"Follow"})),d}function M(e,t,n,o){let a=(0,v.aF)(),{onboardingModalRef:s,requireLogin:h}=(0,w.SJ)(),m=function(e,t){let{data:n}=B(t);return(null!=n?n:[]).includes(null!=e?e:0)}(null==e?void 0:e.id,o),{mutate:f,data:_}=B(o),g=(0,C.pm)(),Z=(0,k.Q1)((null==e?void 0:e.name)||""),{iString:S,iTemplate:I}=(0,p.M1)(),M=async o=>{if(e){if(!a&&s.current){h?h():s.current.open();return}f(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o?[...t,e.id]:d()(t,e.id)},{revalidate:!1});try{await (0,b.rd)("/api/v1/feed/".concat(e.id,"/follow"),{method:o?"POST":"DELETE",json:{surface:t,noteId:n}}),g.popToast(e=>(0,l.tZ)(C.FN,(0,r._)((0,i._)({},e),{Icon:o?u.Z:c.Z,text:o?I(x(),Z):I(N(),Z),cta:S("Undo"),onAccept:()=>M(!o)})))}catch(e){g.popToast(t=>(0,l.tZ)(C.FN,(0,r._)((0,i._)({},t),{text:(0,y.zx)(e)})));return}}};return{isFollowing:m,toggle:()=>M(!m),isLoaded:!!_}}function A(e,t,n){let{isFollowing:i,toggle:r}=M(e,t,n),[o,l]=(0,a.eJ)(!1);return{isFollowing:i,buttonProps:{onClick:()=>{r(),i||l(!0)},onMouseLeave:()=>l(!1)}}}},36518:function(e,t,n){n.d(t,{N$:()=>p,lR:()=>f});var i=n(16584),r=n(6400),o=n(30396),l=n(32351),a=n(14952),s=n(48980),d=n(8635),u=n(7882),c=n(98750),h=n(98914),m=n(6070);function p(e){let{defaultState:t,shouldLoad:n=!0,shouldPoll:r=!1,activityToken:o,children:l}=e;return(0,i.tZ)(_,{defaultState:null==t?void 0:t.activity,shouldLoad:n,shouldPoll:r,activityToken:o,children:l})}let v=(0,r.createContext)({lastViewedAt:null,activityUnreadCount:0,activityUnreadAtMax:!1,refetch:async()=>!0,markAllAsRead:async()=>{},hasLoadedOnce:!1});function f(){return(0,o.qp)(v)}function _(e){let{defaultState:t,shouldLoad:n=!0,shouldPoll:r=!1,activityToken:p,children:f}=e,_=(0,u.ib)({pathname:"/api/v1/activity/unread",deps:[],auto:n,initialResult:t,query:{token:p}}),b=(0,a.Ij)(),g=!!b&&(0,m.HD)({pub:b}),y=!(0,c.th)()&&!g,Z=async()=>{let e=await (0,s.rd)("/api/v1/activity/unread",{method:"post",json:{after:new Date().toISOString(),token:p}});_.setResult(e)};(0,d.Z)(async()=>{if(r&&n&&(0,h.dr)()){var e;let t=(null===(e=_.result)||void 0===e?void 0:e.count)||0,n=await _.refetch();if(t!==(!(n instanceof Error)&&n.count||0))return!0}},6e4);let C=null!=_.result?_.result.count:0;return(0,o.d4)(()=>{try{var e,t;null===(e=(t=navigator).setAppBadge)||void 0===e||e.call(t,C)}catch(e){console.warn(e)}},[C]),(0,i.BX)(v.Provider,{value:{lastViewedAt:null!=_.result?_.result.lastViewedAt:null,activityUnreadCount:C,activityUnreadAtMax:null!=_.result&&_.result.max,refetch:_.refetch,markAllAsRead:Z,hasLoadedOnce:_.hasLoadedOnce},children:[(0,i.tZ)(l.Metadata,{badge:y?C:void 0}),f]})}v.displayName="NotificationsContext"},42375:function(e,t,n){n.d(t,{$U:()=>h,rI:()=>p});var i=n(16584),r=n(98661),o=n(30396),l=n(25642),a=n(27744),s=n(75822),d=n(88817),u=n(75419),c=n(41233);function h(e){let{state:t,dispatch:n,surface:r,children:h}=e,{onboardingModalRef:p}=(0,d.SJ)(),v=(0,o.Ye)(()=>({dispatch:n}),[]);return(0,i.tZ)(m.Provider,{value:r,children:(0,i.tZ)(a.RR.Provider,{value:v,children:(0,i.tZ)(a.ev.Provider,{value:t,children:(0,i.tZ)(l.ju,{children:(0,i.tZ)(u.Au,{children:(0,i.BX)(s.qS,{children:[h,(0,i.tZ)(c.fA,{isOpen:!!t.isSigningIn,onCancel:()=>n({type:"sign_in",payload:{isSigningIn:!1}}),onSuccess:()=>{n({type:"sign_in",payload:{isSigningIn:!1}}),document.location.reload()},onSignup:()=>{var e;n({type:"sign_in",payload:{isSigningIn:!1}}),null===(e=p.current)||void 0===e||e.open()},noExit:t.signInNoExit})]})})})})})})}let m=(0,r.createContext)("feed");function p(){return(0,o.qp)(m)}},43251:function(e,t,n){n.d(t,{Lw:()=>r});var i=n(60308);function r(e,t){return(null==e?void 0:e.profile_set_up_at)?(0,i.NNq)(e,t):(0,i.Nhr)((null==t?void 0:t.utm_source)?{utm_source:t.utm_source}:void 0)}},59480:function(e,t,n){n.d(t,{Uu:()=>s});var i=n(68833);let r=["sort"],o=["sort","selection"],l=[];function a(e,t){let n;try{n=new URL("".concat(location.protocol,"//").concat(location.host).concat(e))}catch(t){n=new URL(e)}for(let e of n.searchParams.keys())(t?o:r).includes(e)||n.searchParams.delete(e);return n.toString()}function s(e){setTimeout(()=>(function(e){var t,n;let{previous:r,url:o}=e;if("undefined"==typeof window)return;let s=a(o,!1),d=a(o,!0),{head:u}=document;null===(t=u.querySelector("link[rel=canonical]"))||void 0===t||t.setAttribute("href",s),null===(n=u.querySelector('meta[property="og:url"]'))||void 0===n||n.setAttribute("content",d),l.push(o),setTimeout(()=>{(0,i.jA)({previous:r,url:o})},100)})(e),0)}},9682:function(e,t,n){n.d(t,{js:()=>o,tv:()=>l});var i=n(30396),r=n(20042);function o(e,t){(0,i.d4)(()=>{let t=t=>{e(t)};return r.subscribers.push(t),()=>{r.subscribers.splice(r.subscribers.indexOf(t)>>>0,1)}},t)}function l(){let{path:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=(0,i.eJ)({}),l=(0,i.sO)(null);o(e=>{l.current=e,n({})},[]);let a=l.current||(0,r.getCurrentUrl)(),s=a.replace(/\?.+$/,""),d=document.location.hash;return l.current=null,[{url:a,path:s,matches:e&&(0,r.exec)(s,e,{})||null,hash:d},r.route]}},46234:function(e,t,n){n.d(t,{B:()=>d});var i=n(7409),r=n(16584),o=n(19081),l=n(58175),a=n(14773),s=n(63651);let d=e=>{let{firehoseFeedUrl:t,pub:n,section:d,trackingSource:u,variant:c="default"}=e,h=(0,a.n1)("/p/how-do-i-add-a-bulwark-member-only",(0,i._)({utm_source:u},d?{utm_content:d.id}:null)),m=(0,a.n1)("/account/add-all-podcasts",(0,i._)({utm_source:u},d?{utm_content:d.id}:null)),p=t?(0,r.BX)(l.xv.B3,{as:"li",font:"text",children:["Click here to set up your podcast app for"," ",(0,r.tZ)("a",{href:t,rel:"noopener noreferrer",target:"_blank",children:"everything in one feed"})]}):null,v=(0,s.W1P)(n,{params:{utm_source:u}});return(0,r.tZ)("div",{className:"container-o06YlK",children:"member-only"===c?(0,r.BX)(o.tu,{as:"ul",gap:4,children:[(0,r.BX)(l.xv.B3,{as:"li",font:"text",children:["Want to listen without ads? Join Bulwark+ for exclusive ad-free versions of all Bulwark shows."," ",(0,r.tZ)("a",{href:v,rel:"noopener noreferrer",target:"_blank",children:"Upgrade now"})]}),(0,r.BX)(l.xv.B3,{as:"li",font:"text",children:["Already a Bulwark+ member? Login to access premium shows. ",(0,r.tZ)("a",{href:h,children:"Learn more here"})]})]}):(0,r.BX)(o.tu,{as:"ul",gap:4,children:[(0,r.BX)(l.xv.B3,{as:"li",font:"text",children:["Learn about"," ",(0,r.tZ)("a",{href:h,rel:"noopener noreferrer",target:"_blank",children:"setting up your Bulwark+ private podcast feeds"})]}),p||(0,r.BX)(l.xv.B3,{as:"li",font:"text",children:["Add the Bulwark Premium Show"," ",(0,r.tZ)("a",{href:m,rel:"noopener noreferrer",target:"_blank",children:"super feed"})]})]})})}},30733:function(e,t,n){n.d(t,{N:()=>a});var i=n(16584),r=n(94184),o=n.n(r),l=n(71068);let a=e=>{let{children:t,columns:n=2,paddingTop:r=24}=e,a=(0,l.oB)({paddingTop:r,paddingX:16,paddingBottom:32});return(0,i.tZ)("div",{className:o()("container-kIrj2N",a,{"containerThreeColumn-Rot594":3===n,"containerFourColumn-vOHVwe":4===n}),children:t})}},84370:function(e,t,n){n.d(t,{T:()=>a});var i=n(16584),r=n(43570),o=n(58175),l=n(52503);function a(e){let{modifier:t,children:n,className:a}=e,s=function(e){let t=navigator.platform.toLowerCase().includes("mac");switch(null==e?void 0:e.toLowerCase()){case"cmd":return t?"⌘":"Ctrl + ";case"shift":return t?"⇧":"Shift + ";case"alt":case"opt":return t?"⌥":"Alt + ";case"ctrl":return t?"⌃":"Ctrl + ";case"esc":return"Esc";case"left":return"←";case"right":return"→";case"up":return"↑";case"down":return"↓";default:return""}}(t);return(0,i.tZ)(r.Vp,{priority:"secondary-outline",theme:"default",className:a,children:(0,i.BX)(o.xv,{as:"kbd",font:"text",weight:"regular",color:"secondary",className:l.Z.kbd,children:[s,n]})})}},78096:function(e,t,n){n.d(t,{dm:()=>f,gd:()=>_,yo:()=>b});var i=n(7409),r=n(99282),o=n(98848),l=n(16584),a=n(94184),s=n.n(a),d=n(98661),u=n(86374),c=n(95441),h=n(15771),m=n(19081),p=n(44424),v=n(87815);let f=e=>{var{priority:t="secondary-outline",size:n="md"}=e,r=(0,o._)(e,["priority","size"]);"secondary-outline"===t&&(t="tertiary");let a="tertiary"===t;return(0,l.tZ)(y.Provider,{value:{priority:t,size:n},children:(0,l.tZ)(m.X2,(0,i._)({radius:"sm"===n?"xs":"sm",className:s()(v.Z.group,a&&v.Z.outlined)},r))})},_=e=>{var{children:t,priority:n="primary",size:a="md",menuItems:s,additionalMenuProps:d={}}=e,h=(0,o._)(e,["children","priority","size","menuItems","additionalMenuProps"]);let{iString:m}=(0,c.M1)();return(0,l.BX)(f,{priority:n,size:a,children:[(0,l.tZ)(b,(0,r._)((0,i._)({},h),{children:t})),(0,l.tZ)(p.v2,(0,r._)((0,i._)({},d),{layerOptions:{placement:"bottom-end"},trigger:(0,l.tZ)(g,(0,r._)((0,i._)({},h),{"aria-label":m("Dropdown menu"),children:(0,l.tZ)(u.Z,{size:"sm"===a?16:"md"===a?20:24})})),children:s}))]})},b=(0,d.forwardRef)((e,t)=>{var{className:n}=e,a=(0,o._)(e,["className"]);let{priority:u,size:c}=(0,d.useContext)(y);return(0,l.tZ)(h.zx,(0,r._)((0,i._)({priority:u,size:c,className:s()(v.Z.segment,n)},a),{ref:t}))}),g=(0,d.forwardRef)((e,t)=>{var{className:n}=e,a=(0,o._)(e,["className"]);let{priority:u,size:c}=(0,d.useContext)(y);return(0,l.tZ)(h.hU,(0,r._)((0,i._)({priority:u,size:c,className:s()(v.Z.segment,n)},a),{ref:t}))}),y=(0,d.createContext)({priority:"primary",size:"md"})},89263:function(e,t,n){n.d(t,{n:()=>u});var i=n(7409),r=n(99282),o=n(98848),l=n(16584),a=n(30396),s=n(54278),d=n(51776);let u=e=>{var{details:t,disabled:n,errors:u,helpText:c,inputRef:h,label:m,name:p,paddingBottom:v,paddingTop:f,value:_,onChange:b}=e,g=(0,o._)(e,["details","disabled","errors","helpText","inputRef","label","name","paddingBottom","paddingTop","value","onChange"]);let y=(0,a.I4)(e=>{b(e.target.value)},[b]);return(0,l.tZ)(s.g,{label:m,details:t,errors:u,helpText:c,paddingTop:f,paddingBottom:v,wrapWithLabel:!0,children:(0,l.tZ)(d.oi,(0,r._)((0,i._)({},g),{ref:h,error:!!(null==u?void 0:u.length),disabled:n,name:p,value:_,onChange:y}))})}},83010:function(e,t,n){n.d(t,{H:()=>u,n:()=>c});var i=n(7409),r=n(99282),o=n(16584),l=n(6400),a=n(30396),s=n(68833);let d=(0,l.createContext)({surface:null,platform:"web"});function u(e){let{children:t,trackingProps:n}=e,r=(0,a.qp)(d),l=(0,a.Ye)(()=>(0,i._)({},r,n),Object.values(n));return(0,o.tZ)(d.Provider,{value:l,children:t})}function c(){let e=(0,a.qp)(d);return(t,n)=>(0,s.j)(t,(0,i._)((0,r._)((0,i._)({},e),{ui:"page"===e.surface?"activity-page":e.surface}),n))}},76819:function(e,t,n){n.d(t,{Hs:()=>l,Rx:()=>a,ye:()=>o});var i=n(7409),r=n(75561);function o(e){var t,n,i;return e.link_title||(null===(t=e.postTag)||void 0===t?void 0:t.name)||(null===(n=e.section)||void 0===n?void 0:n.name)||(null===(i=e.post)||void 0===i?void 0:i.title)||""}function l(e){var t;return e.postTag?"tag":e.section?"section":(null===(t=e.post)||void 0===t?void 0:t.type)==="page"?"page":e.post?"post":"link"}function a(e,t){let{isChatActive:n,isMeetingsActive:o,hasMultipleNewsletters:l,isChatEnabled:a,isFeedEnabled:s,isReaderReferralsLeaderboardActive:d,language:u="en",useReordering:c=!1}=t,h=e.filter(e=>!e.standard_key),m=new Map(e.filter(e=>e.standard_key).map(e=>[e.standard_key,e])),{iString:p}=I18N.i(u);for(let e of h){var v;(null===(v=e.section)||void 0===v?void 0:v.hide_from_navbar)&&(e.is_hidden=!0)}let f=[s&&{standard_key:"notes",link_title:"Notes",link_url:"/notes"},a&&{standard_key:"chat",link_title:"Chat",link_url:"/chat",is_hidden:!n},o&&{standard_key:"meetings",link_title:"Meetings",link_url:"/meetings"},...h,{standard_key:"archive",link_title:p("Archive"),link_url:"/archive"},l&&{standard_key:"newsletters",link_title:p("Newsletters"),link_url:"/newsletters",is_hidden:!0},d&&{standard_key:"leaderboard",link_title:p("Leaderboard"),link_url:"/leaderboard"},{standard_key:"about",link_title:p("About"),link_url:"/about"}].filter(e=>!!e).map(e=>{if(e.standard_key){let t=m.get(e.standard_key);if(t)return(0,r.CD)((0,i._)({},e),t)}return e});if(c){let e=["about","notes","chat","archive"];return[...f.filter(t=>!e.includes(t.standard_key||"")),...e.map(e=>f.find(t=>t.standard_key===e)).filter(e=>!!e)].filter(e=>!!e)}return f}},62515:function(e,t,n){n.d(t,{Ds:()=>s,Rm:()=>o,aD:()=>l,gp:()=>a});var i=n(14773),r=n(63651);function o(e,t){return(0,i.Q2)("/chat/".concat(e),t)}function l(e,t){return(0,i.Q2)("/chat/".concat(e),t)}function a(e){return(0,i.Q2)("/chat/new",e)}function s(e){let{userId:t,userName:n}=e,o=(0,r.JlE)({userId:t,userName:n});return"".concat((0,i.ZX)(),"/chat/dm/user/").concat(o)}},36515:function(e,t,n){n.d(t,{r:()=>l});var i=n(7409),r=n(99282),o=n(14773);function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.Q2)("/publish/chat",(0,r._)((0,i._)({},t),{pub:e}))}}}]);