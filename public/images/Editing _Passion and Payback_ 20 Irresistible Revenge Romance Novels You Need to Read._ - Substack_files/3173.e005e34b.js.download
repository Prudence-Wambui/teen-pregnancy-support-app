"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["3173"],{6651:function(e,t,n){n.d(t,{Z:()=>r});let r={popoverBase:"popoverBase-UcdBQb"}},83034:function(e,t,n){n.r(t),n.d(t,{AppInstallContent:()=>O,AppInstallModal:()=>X,AppInstallUpsells:()=>P,AppStoreQrCode:()=>D,EmailCodeCTA:()=>L,useAppModal:()=>A});var r=n(7409),o=n(99282),i=n(58865),a=n(16584),l=n(30396),c=n(93372),s=n(20888),d=n(95441),u=n(60807),p=n(68833),m=n(48980),h=n(64576),g=n(7882),f=n(13229),y=n(15771),Z=n(61254),_=n(19081),v=n(1844),C=n(6490),w=n(58175),S=n(14518),I=n(91400),b=n(60308),B=n(84864),k=n(8525);function T(){let e=(0,i._)(["Accept ","'s gift in the Substack app"]);return T=function(){return e},e}function x(){let e=(0,i._)(["We sent a link to download the Substack app to ","."]);return x=function(){return e},e}function A(){let{utm_campaign:e,utm_source:t,utm_content:n,abTestingId:r,overrideCTA:o,overrideTitle:i,subTitle:c,openUrl:s,giftCard:d,pub:u,facepileUsers:m}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[h,g]=(0,l.eJ)(!1),f=(0,l.I4)(()=>{g(!0),(0,p.j)(p.FP.APP_INSTALL_MODAL_OPENED,{utm_campaign:e,utm_source:t,utm_content:n})},[e,t,n]),y=(0,l.I4)(()=>{g(!1)},[]);return{open:f,modal:(0,a.tZ)(X,{isOpen:h,onClose:y,utm_campaign:e,utm_source:t,utm_content:n,abTestingId:r,overrideCTA:o,overrideTitle:i,subTitle:c,openUrl:s,width:d?450:void 0,giftCard:d,pub:u,facepileUsers:m})}}function O(e){let{utm_campaign:t,utm_source:n,utm_content:r,hideEmailPrompt:o=!1,abTestingId:i,suggestedEmail:l,size:c,padding:s=32,openUrl:u,overrideCTA:p,onSend:m}=e,{iString:h}=(0,d.M1)(),g=(0,I.XA)();return(0,a.BX)(_.tu,{gap:20,padding:s,children:[!g&&(0,a.BX)(a.HY,{children:[(0,a.tZ)(_.hs,{className:k.Z.qrCode,padding:20,alignSelf:"center",children:(0,a.tZ)(D,{size:c,utm_campaign:t,utm_source:n,utm_content:r,abTestingId:i,openUrl:u})}),!g&&!o&&(0,a.tZ)(Z.ZC,{})]}),!g&&!o&&(0,a.tZ)(L,{suggestedEmail:l,onSend:m}),g&&(0,a.tZ)(y.zx,{href:u||(0,b.D4e)({utm_campaign:t,utm_source:n}),children:p||h("Install the app")})]})}function P(e){let{utm_campaign:t,utm_source:n,darkMode:r=!1}=e;return(0,a.BX)(_.hs,{gap:16,justifyContent:"center",children:[(0,a.tZ)("a",{className:k.Z.appBadge,href:(0,b.RMm)({utm_campaign:t,utm_source:n}),onClick:()=>{(0,p.j)(p.FP.APP_STORE_LINK_CLICKED,{source:"app_install_upsell",app_store:"ios",utm_campaign:t,utm_source:n})},children:(0,a.tZ)("img",{src:(0,b.zF4)(r?"/img/app_page/app-store-white.png":"/img/app_page/app-store.png",320),height:48})}),(0,a.tZ)("a",{className:k.Z.appBadge,href:(0,b.AaB)({utm_campaign:t,utm_source:n}),onClick:()=>{(0,p.j)(p.FP.APP_STORE_LINK_CLICKED,{source:"app_install_upsell",app_store:"android",utm_campaign:t,utm_source:n})},children:(0,a.tZ)("img",{src:(0,b.zF4)(r?"/img/app_page/google-play-white.png":"/img/app_page/google-play.png",320),height:48})})]})}function X(e){var t;let{isOpen:n,onClose:i,utm_campaign:s,utm_content:u,utm_source:p,abTestingId:m,overrideCTA:h,overrideTitle:g,subTitle:y,openUrl:Z,width:v,facepileUsers:w,showMobileClose:S,giftCard:k,pub:x}=e,{iString:A,iTemplate:P}=(0,d.M1)(),X=(0,I.XA)(),[D,L]=(0,l.eJ)(""),E=(0,l.I4)(e=>{L(e)},[]),F=(0,l.I4)(()=>{L(""),i()},[i]),M=!!k&&!!x,z=(null==k?void 0:null===(t=k.gifter)||void 0===t?void 0:t.name)?"Split Zone Duo"===k.gifter.name?"SZD":(0,B.guessFirstName)(k.gifter.name):"",N=g||(M?z?P(T(),z):A("Accept this gift in the Substack app"):A("Download the Substack app"));return(0,a.BX)(C.u_,{isOpen:n,onClose:i,width:v||360,position:X?"bottom":"default",children:[(0,a.tZ)(C.xB,{title:N,description:y,onClose:i,showClose:!X||S,showDivider:!0}),D?(0,a.tZ)(j,{sentEmail:D,closeModal:F}):(0,a.BX)(_.tu,{alignItems:"stretch",paddingTop:32*!!X,children:[M?(0,a.tZ)(_.hs,{justifyContent:"center",alignItems:"center",paddingTop:{desktop:20,mobile:0},children:(0,a.tZ)(c.h,(0,o._)((0,r._)({},k),{pub:x}))}):(null==w?void 0:w.length)?(0,a.tZ)(_.hs,{justifyContent:"center",alignItems:"center",padding:{mobile:8},children:(0,a.tZ)(f.H,{users:w,max:3,size:48})}):X?(0,a.tZ)(_.hs,{justifyContent:"center",alignItems:"center",children:(0,a.tZ)("img",{src:(0,b.zF4)("/img/substack-app-icon.png"),height:64,width:64})}):null,(0,a.tZ)(O,{utm_campaign:s,utm_source:p,utm_content:u,abTestingId:m,openUrl:Z,overrideCTA:h,size:142,onSend:E})]})]})}function D(e){let{utm_campaign:t,utm_source:r,utm_content:o,abTestingId:i,size:c=240,width:s,height:d,openUrl:u}=e,p=(0,l.sO)(null),m=(0,b.D4e)({utm_campaign:t,utm_source:r,utm_content:o,abti:i}),{darkMode:f}=(0,h.v)(),y=function(e,t){let{result:r}=(0,g.Wf)(()=>n.e("9327").then(n.t.bind(n,91915,23)),[],{auto:!0}),o=null==r?void 0:r.default;return(0,l.Ye)(()=>o&&"undefined"!=typeof window?new o(e(window)):null,[o,...t])}(e=>{let t=e.devicePixelRatio,n=getComputedStyle(document.body),r=n.getPropertyValue("--color-primary-themed");return{width:(null!=s?s:c)*t,height:(null!=d?d:c)*t,type:"canvas",data:u||m,dotsOptions:{color:r,type:"dots"},backgroundOptions:{color:n.getPropertyValue("--color-bg-elevated")},cornersSquareOptions:{color:r,type:"extra-rounded"},cornersDotOptions:{color:r,type:"dot"},qrOptions:{errorCorrectionLevel:"L"}}},[s,d,u,f]);return(0,l.d4)(()=>{let{current:e}=p;if(!e||!y||!y._canvas)return;let t=y._canvas;return t.style.width="".concat(null!=s?s:c,"px"),t.style.height="".concat(null!=d?d:c,"px"),e.style.width="".concat(null!=s?s:c,"px"),e.style.height="".concat(null!=d?d:c,"px"),e.appendChild(t),()=>{e.removeChild(t)}},[y,s,d]),(0,a.tZ)("div",{ref:p})}function L(e){let{suggestedEmail:t,onSend:n}=e,{iString:r}=(0,d.M1)(),o=(0,u.aF)(),[i,c]=(0,l.eJ)((null==o?void 0:o.email)||t||""),[s,p]=(0,l.eJ)(!1),[h,g]=(0,l.eJ)(null);return(0,a.tZ)(a.HY,{children:(0,a.BX)(_.tu,{gap:8,children:[(0,a.tZ)(S.H,{placeholder:r("Your email"),placement:"end",priority:"primary",type:"email",value:i,onChange:e=>c(e.currentTarget.value),button:(0,a.tZ)(y.zx,{priority:"primary",loading:s,onClick:async()=>{p(!0);try{await (0,m.rd)("/api/v1/send_app_download_link",{method:"POST",json:{email:i}}),g(null),p(!1),n&&n(i)}catch(e){g("Something went wrong")}},children:r("Send link")})}),h&&(0,a.tZ)(v.y,{align:"center",children:h})]})})}let j=e=>{let{sentEmail:t,closeModal:n}=e,{iString:r,iTemplate:o}=(0,d.M1)();return(0,a.BX)(a.HY,{children:[(0,a.tZ)(C.fe,{children:(0,a.BX)(_.tu,{gap:20,justifyContent:"center",alignItems:"center",children:[(0,a.tZ)(s.e,{src:"/img/cohorts/local_news/plane.png",maxWidth:64}),(0,a.BX)(_.tu,{gap:4,justifyContent:"center",alignItems:"center",children:[(0,a.tZ)(w.xv.B2,{weight:"semibold",textAlign:"center",children:r("Check your email")}),(0,a.tZ)(w.xv.B3,{color:"secondary",align:"center",children:o(x(),t||"your email")})]})]})}),(0,a.tZ)(C.mz,{alignButtons:"stretch",primaryButton:(0,a.tZ)(y.zx,{priority:"secondary",onClick:n,children:r("Done")})})]})}},16864:function(e,t,n){n.d(t,{Z:()=>c});var r=n(7409),o=n(99282),i=n(98848),a=n(16584),l=n(64515);let c=e=>{var{size:t=24,className:n}=e,c=(0,i._)(e,["size","className"]);return(0,a.tZ)(l.l,(0,o._)((0,r._)({},c),{name:"ChevronRightCircleIcon",svgParams:{viewBox:"0 0 24 24"},stroke:"none",width:t,height:t,className:n,children:(0,a.tZ)("path",{d:"M24 12C24 18.553 18.5648 24 12 24C5.44707 24 0 18.553 0 12C0 5.4353 5.4353 0 11.9883 0C18.553 0 24 5.4353 24 12ZM9.22355 6.02354C8.84708 6.37648 8.83531 6.97649 9.21178 7.32943L14.2 12.0117L9.21178 16.7059C8.84708 17.0471 8.84708 17.6353 9.21178 18.0118C9.5412 18.3177 10.1765 18.2942 10.5177 17.9647L15.5647 13.2118C16.2471 12.5765 16.2588 11.4589 15.5647 10.8118L10.5177 6.07061C10.1412 5.71766 9.57649 5.68237 9.22355 6.02354Z"})}))}},41233:function(e,t,n){n.d(t,{LZ:()=>_,et:()=>v,fA:()=>y});var r=n(7409),o=n(99282),i=n(16584),a=n(95441),l=n(17625),c=n(80026),s=n(6490),d=n(65523),u=n(4354),p=n(65942),m=n(23276),h=n(9003),g=n(24142),f=n(91400);function y(e){let{onCancel:t,onSuccess:n,onSignup:r,onUserCreated:o,noCloseButton:a,noExit:c,isOpen:d,redirectOverride:p,overrideTitle:m,zIndex:h}=e,g=(0,f.XA)();return(0,i.tZ)(s.u_,{onClose:t,isOpen:d,zIndex:h,children:(0,i.BX)(u.t,{children:[(0,i.tZ)(Z,{onCancel:t,onSuccess:n,onSignup:r,onUserCreated:o,noCloseButton:a,noExit:c,redirectOverride:p,overrideTitle:m}),g&&(0,i.tZ)(l.o$,{})]})})}function Z(e){let{onCancel:t,onSuccess:n,onSignup:a,onUserCreated:l,noCloseButton:c,noExit:s,redirectOverride:d,overrideTitle:f}=e,{mode:y}=(0,u.I)(),Z={overrideTitle:f,noCloseButton:c||s,onCancel:t,onSignup:a};return(0,i.BX)(i.HY,{children:["magic-link"===y&&(0,i.tZ)(p.v,(0,o._)((0,r._)({},Z),{onSuccess:n})),"email"===y&&(0,i.tZ)(m.j,(0,o._)((0,r._)({},Z),{onUserCreated:l,redirectOverride:d})),"password"===y&&(0,i.tZ)(g.L,(0,o._)((0,r._)({},Z),{onSuccess:n})),"mfa"===y&&(0,i.tZ)(h.n,{onSuccess:n})]})}let _=e=>{let{overrideTitle:t,noCloseButton:n,onCancel:r,onSignup:o}=e,{iString:l}=(0,a.M1)();return(0,i.tZ)(d.xB,{title:t||l("Sign in to Substack"),description:o?(0,i.BX)(i.HY,{children:[l("First time here? "),(0,i.tZ)(c.hh,{color:"substack",decoration:"hover-underline",onClick:o,cursor:"pointer",children:l("Create account")})]}):void 0,showClose:!n,onClose:r,icon:(0,i.tZ)(d.ZN,{}),alignItems:"center"})},v=e=>{let{children:t}=e;return(0,i.tZ)(c.sg,{padding:16,borderTop:"detail",children:(0,i.tZ)(c.xv.B4,{as:"span",color:"secondary",align:"center",children:t})})}},16913:function(e,t,n){n.d(t,{E:()=>u});var r=n(16584),o=n(95441),i=n(80026),a=n(98012);let l=new Intl.DateTimeFormat(void 0,{timeStyle:"short"}),c=new Intl.DateTimeFormat(void 0,{weekday:"long"}),s=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),d=new Intl.DateTimeFormat(void 0,{dateStyle:"long"});function u(e){let{timestamp:t,conjunction:n=!1}=e,{iString:u,language:p}=(0,o.M1)(),m=new Date(t),h=(0,a.Z)(),g=p.startsWith("en"),f=h.isSame(m,"day")?u("Today"):h.subtract(1,"day").isSame(m,"day")?u("Yesterday"):h.isSame(m,"week")?c.format(m):h.isSame(m,"year")?s.format(m):d.format(m);return(0,r.tZ)(i.X2,{alignItems:"center",justifyContent:"center",children:(0,r.BX)(i.xv.B4,{color:"secondary",children:[f,n&&g?" at ":" ",l.format(m)]})})}},32223:function(e,t,n){n.d(t,{c:()=>s});var r=n(7409),o=n(98848),i=n(16584),a=n(41293),l=n(80026),c=n(23710);function s(e){var{children:t,setReactions:n=!0,alignSelf:l}=e,c=(0,o._)(e,["children","setReactions","alignSelf"]);return n?(0,i.BX)(d,{position:"relative",alignSelf:l,children:[t,(0,i.tZ)(a.Jg,(0,r._)({},c))]}):(0,i.tZ)(i.HY,{children:t})}let d=(0,l.E7)({display:"flex",className:c.Z.reactionsHoverZone})},11308:function(e,t,n){n.d(t,{o:()=>c});var r=n(7409),o=n(99282),i=n(79094),a=n(48980),l=n(97842);function c(e){let{entityType:t,publication:n}=e,a=(0,i.T)(),c=(0,l.I0)();return(e,i)=>{a({onSubmit:n=>c("communityPost"===t?s((0,o._)((0,r._)({},n),{id:e})):d((0,o._)((0,r._)({},n),{id:e}))),canReportToAdmins:!!(n&&i&&n.moderation_enabled),pub:null!=n?n:void 0})}}let s=e=>{let{id:t,details:n,reportCategory:r,reportedToSubstack:o}=e;return async e=>{e({type:"posts-flag_post",payload:{id:t}});let i=await u({id:t,details:n,reportCategory:r,reportedToSubstack:o});i instanceof Error&&console.warn("error flagging post",i)}},d=e=>{let{id:t,details:n,reportCategory:r,reportedToSubstack:o}=e;return async e=>{e({type:"comments-flag_comment",payload:{id:t}});let i=await p({id:t,details:n,reportCategory:r,reportedToSubstack:o});i instanceof Error&&console.warn("error flagging comment",i)}};async function u(e){let{id:t,details:n,reportCategory:r,reportedToSubstack:o}=e;try{return await (0,a.rd)("/api/v1/community/posts/".concat(t,"/reports"),{method:"POST",json:{postId:t,details:n,reportCategory:r,reportedToSubstack:o}})}catch(e){return e}}async function p(e){let{id:t,details:n,reportCategory:r,reportedToSubstack:o}=e;try{return await (0,a.rd)("/api/v1/community/comments/".concat(t,"/reports"),{method:"POST",json:{commentId:t,details:n,reportCategory:r,reportedToSubstack:o}})}catch(e){return e}}}}]);